{
    "sourceFile": "sections/product-slider.liquid",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1748433449655,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1748433543540,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -248,52 +248,63 @@\n   </div>\n </section>\n \n {% javascript %}\n-  function initializeTabs() {\n-    const buttons = document.querySelectorAll('.tab-buttons button');\n-    const carousels = document.querySelectorAll('.product-carousel');\n+function initCollectionTabsSlider(sectionEl) {\n+  const buttons = sectionEl.querySelectorAll('.tab-buttons button');\n+  const carousels = sectionEl.querySelectorAll('.product-carousel');\n \n-    buttons.forEach(button => {\n-      button.addEventListener('click', function () {\n-        const tab = this.dataset.tab;\n+  buttons.forEach(button => {\n+    button.addEventListener('click', function () {\n+      const tab = this.dataset.tab;\n \n-        buttons.forEach(btn => btn.classList.remove('active'));\n-        this.classList.add('active');\n+      buttons.forEach(btn => btn.classList.remove('active'));\n+      this.classList.add('active');\n \n-        carousels.forEach(carousel => {\n-          if (carousel.dataset.tab === tab) {\n-            carousel.classList.add('active');\n-          } else {\n-            carousel.classList.remove('active');\n-          }\n-        });\n+      carousels.forEach(carousel => {\n+        if (carousel.dataset.tab === tab) {\n+          carousel.classList.add('active');\n+        } else {\n+          carousel.classList.remove('active');\n+        }\n       });\n     });\n-  }\n+  });\n \n-  function initializeFlickity() {\n-    const flickityElems = document.querySelectorAll('.js-flickity');\n-    flickityElems.forEach(el => {\n-      if (!el.classList.contains('flickity-enabled')) {\n-        new Flickity(el, JSON.parse(el.getAttribute('data-flickity-options')));\n-      }\n-    });\n+  const flickityElems = sectionEl.querySelectorAll('.js-flickity');\n+  flickityElems.forEach(el => {\n+    if (!el.classList.contains('flickity-enabled')) {\n+      new Flickity(el, JSON.parse(el.getAttribute('data-flickity-options')));\n+    }\n+  });\n+}\n+\n+function loadFlickityAndInitAllSections() {\n+  const sectionEls = document.querySelectorAll('.collection-tabs-section');\n+  sectionEls.forEach(initCollectionTabsSlider);\n+}\n+\n+function loadFlickityLibrary(callback) {\n+  if (typeof Flickity === 'undefined') {\n+    const script = document.createElement('script');\n+    script.src = 'https://cdnjs.cloudflare.com/ajax/libs/flickity/2.3.0/flickity.pkgd.min.js';\n+    script.onload = callback;\n+    document.head.appendChild(script);\n+  } else {\n+    callback();\n   }\n+}\n \n-  function loadFlickityAndInit() {\n-    if (typeof Flickity === 'undefined') {\n-      const flickityScript = document.createElement('script');\n-      flickityScript.src = 'https://cdnjs.cloudflare.com/ajax/libs/flickity/2.3.0/flickity.pkgd.min.js';\n-      flickityScript.onload = () => {\n-        initializeFlickity();\n-        initializeTabs();\n-      };\n-      document.head.appendChild(flickityScript);\n-    } else {\n-      initializeFlickity();\n-      initializeTabs();\n-    }\n+// Initial run\n+document.addEventListener('DOMContentLoaded', function () {\n+  loadFlickityLibrary(loadFlickityAndInitAllSections);\n+});\n+\n+// Re-init after section is loaded in Theme Customizer\n+document.addEventListener('shopify:section:load', function (e) {\n+  const sectionEl = e.target.querySelector('.collection-tabs-section');\n+  if (sectionEl) {\n+    loadFlickityLibrary(() => initCollectionTabsSlider(sectionEl));\n   }\n+});\n+{% endjavascript %}\n \n-  document.addEventListener('DOMContentLoaded', loadFlickityAndInit);\n-{% endjavascript %}\n"
                }
            ],
            "date": 1748433449655,
            "name": "Commit-0",
            "content": "{% schema %}\n{\n  \"name\": \"Collection Tabs Slider\",\n  \"settings\": [\n    {\n      \"type\": \"image_picker\",\n      \"id\": \"left_image\",\n      \"label\": \"Left Side Image\"\n    },\n    {\n      \"type\": \"text\",\n      \"id\": \"subheading\",\n      \"label\": \"Subheading\",\n      \"default\": \"Customer Favorites\"\n    },\n    {\n      \"type\": \"text\",\n      \"id\": \"heading\",\n      \"label\": \"Heading\",\n      \"default\": \"Best Sellers\"\n    },\n    {\n      \"type\": \"url\",\n      \"id\": \"shop_all_url\",\n      \"label\": \"Shop All Button URL\"\n    },\n    {\n      \"type\": \"checkbox\",\n      \"id\": \"show_arrows\",\n      \"label\": \"Show slider arrows\",\n      \"default\": true\n    },\n    {\n      \"type\": \"select\",\n      \"id\": \"section_width\",\n      \"label\": \"Section Width\",\n      \"default\": \"standard\",\n      \"options\": [\n        {\n          \"value\": \"standard\",\n          \"label\": \"50% Width\"\n        },\n        {\n          \"value\": \"full\",\n          \"label\": \"Full Width\"\n        }\n      ]\n    }\n  ],\n  \"blocks\": [\n    {\n      \"type\": \"tab\",\n      \"name\": \"Collection Tab\",\n      \"settings\": [\n        {\n          \"type\": \"text\",\n          \"id\": \"tab_name\",\n          \"label\": \"Tab Label\",\n          \"default\": \"Best Sellers\"\n        },\n        {\n          \"type\": \"collection\",\n          \"id\": \"collection\",\n          \"label\": \"Collection\"\n        }\n      ]\n    }\n  ],\n  \"presets\": [\n    {\n      \"name\": \"Collection Tabs Slider\",\n      \"category\": \"Somos Custom\"\n    }\n  ]\n}\n{% endschema %}\n\n{% stylesheet %}\n.collection-tabs-section {\n  display: grid;\n  grid-template-columns: 1fr 2fr;\n  gap: 2rem;\n  padding: 2rem 0;\n  margin: 0 auto;\n}\n\n.collection-tabs-section.standard {\n  max-width: 1200px;\n}\n\n.collection-tabs-section.full {\n  max-width: 100%;\n}\n\n.left-image img {\n  width: 100%;\n  max-width: 500px;\n  border-radius: 8px;\n}\n\n.right-content {\n  display: flex;\n  flex-direction: column;\n}\n\n.tab-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.tab-title-group {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n}\n\n.tab-header h3 {\n  margin: 0;\n  font-size: 0.95rem;\n  color: #666;\n}\n\n.tab-header h2 {\n  margin: 0;\n  font-size: 2rem;\n}\n\n.shop-all-btn {\n  text-decoration: none;\n  padding: 0.4rem 0.9rem;\n  background-color: #000;\n  color: #fff;\n  border-radius: 4px;\n  font-size: 0.85rem;\n}\n\n.tab-buttons {\n  display: flex;\n  gap: 2rem;\n  margin: 1rem 0 1.5rem;\n  border-bottom: 2px solid #e5e5e5;\n}\n\n.tab-buttons button {\n  padding: 0.5rem 0;\n  background: none;\n  border: none;\n  border-bottom: 2px solid transparent;\n  font-size: 1rem;\n  font-weight: 600;\n  cursor: pointer;\n  color: #333;\n}\n\n.tab-buttons button.active {\n  border-bottom: 2px solid #000;\n  color: #000;\n}\n\n.product-carousel {\n  display: none;\n}\n\n.product-carousel.active {\n  display: block;\n}\n\n.flickity-viewport {\n  overflow: hidden;\n}\n\n.flickity-slider > .product-card {\n  width: 220px;\n  margin-right: 20px;\n}\n\n.product-card img {\n  width: 100%;\n  border-radius: 8px;\n}\n\n.product-card h4 {\n  font-size: 0.9rem;\n  margin: 0.5rem 0 0.3rem;\n}\n\n.product-card p {\n  font-size: 0.85rem;\n  color: #666;\n  margin: 0;\n}\n{% endstylesheet %}\n\n<section class=\"collection-tabs-section {{ section.settings.section_width }}\">\n  <div class=\"left-image\">\n    {% if section.settings.left_image != blank %}\n      <img src=\"{{ section.settings.left_image | image_url: width: 600 }}\" alt=\"Left Image\">\n    {% endif %}\n  </div>\n\n  <div class=\"right-content\">\n    <div class=\"tab-header\">\n      <div class=\"tab-title-group\">\n        <div>\n          <h3>{{ section.settings.subheading }}</h3>\n          <h2>{{ section.settings.heading }}</h2>\n        </div>\n        {% if section.settings.shop_all_url %}\n          <a href=\"{{ section.settings.shop_all_url }}\" class=\"shop-all-btn\">Shop All</a>\n        {% endif %}\n      </div>\n    </div>\n\n    <div class=\"tab-buttons\">\n      {% for block in section.blocks %}\n        <button\n          class=\"{% if forloop.first %}active{% endif %}\"\n          data-tab=\"tab-{{ forloop.index }}\">\n          {{ block.settings.tab_name }}\n        </button>\n      {% endfor %}\n    </div>\n\n    {% for block in section.blocks %}\n      {% assign collection = collections[block.settings.collection] %}\n      <div\n        class=\"product-carousel js-flickity {% if forloop.first %}active{% endif %}\"\n        data-tab=\"tab-{{ forloop.index }}\"\n        data-flickity-options='{\n          \"contain\": true,\n          \"wrapAround\": true,\n          \"pageDots\": false,\n          \"prevNextButtons\": {{ section.settings.show_arrows }}\n        }'\n      >\n        {% for product in collection.products limit: 10 %}\n          <div class=\"product-card\">\n            <a href=\"{{ product.url }}\">\n              <img src=\"{{ product.featured_image | image_url: width: 300 }}\" alt=\"{{ product.title }}\">\n              <h4>{{ product.title }}</h4>\n              <p>From {{ product.price | money }}</p>\n            </a>\n          </div>\n        {% endfor %}\n      </div>\n    {% endfor %}\n  </div>\n</section>\n\n{% javascript %}\n  function initializeTabs() {\n    const buttons = document.querySelectorAll('.tab-buttons button');\n    const carousels = document.querySelectorAll('.product-carousel');\n\n    buttons.forEach(button => {\n      button.addEventListener('click', function () {\n        const tab = this.dataset.tab;\n\n        buttons.forEach(btn => btn.classList.remove('active'));\n        this.classList.add('active');\n\n        carousels.forEach(carousel => {\n          if (carousel.dataset.tab === tab) {\n            carousel.classList.add('active');\n          } else {\n            carousel.classList.remove('active');\n          }\n        });\n      });\n    });\n  }\n\n  function initializeFlickity() {\n    const flickityElems = document.querySelectorAll('.js-flickity');\n    flickityElems.forEach(el => {\n      if (!el.classList.contains('flickity-enabled')) {\n        new Flickity(el, JSON.parse(el.getAttribute('data-flickity-options')));\n      }\n    });\n  }\n\n  function loadFlickityAndInit() {\n    if (typeof Flickity === 'undefined') {\n      const flickityScript = document.createElement('script');\n      flickityScript.src = 'https://cdnjs.cloudflare.com/ajax/libs/flickity/2.3.0/flickity.pkgd.min.js';\n      flickityScript.onload = () => {\n        initializeFlickity();\n        initializeTabs();\n      };\n      document.head.appendChild(flickityScript);\n    } else {\n      initializeFlickity();\n      initializeTabs();\n    }\n  }\n\n  document.addEventListener('DOMContentLoaded', loadFlickityAndInit);\n{% endjavascript %}\n"
        }
    ]
}