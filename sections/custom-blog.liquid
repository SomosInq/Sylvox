{{ 'https://cdnjs.cloudflare.com/ajax/libs/flickity/2.3.0/flickity.min.css' | stylesheet_tag }}
{{ 'https://cdnjs.cloudflare.com/ajax/libs/flickity/2.3.0/flickity.pkgd.min.js' | script_tag }}

{% comment %}
  Custom section: Custom Blog | custom-blog.liquid
{% endcomment %}
{%- assign override_img = section.settings.custom_banner_override_image -%}

<style>
  #shopify-section-{{ section.id }} .custom-blog__banner {
    background-image: url('{{ override_img | default: featured_article.image | image_url: width: 2000 }}');
  }
  {% if section.settings.custom_banner_image_mob != blank %}
    @media (max-width: 768px) {
      #shopify-section-{{ section.id }} .custom-blog__banner {
        background-image: url('{{ section.settings.custom_banner_image_mob | image_url: width: 991 }}');
      }
    }
  {% endif %}
</style>
<section class="custom-blog" style="background: {{ section.settings.bg_color }};">
  {%- assign featured_article = blog.articles.first -%}
  

  <!-- Banner -->
  {% if section.settings.banner_overlay_opacity > 0 %}
    <div
      class="custom-blog__banner banner_section_width_{{ section.settings.banner_section_width }}"
    >
      <div
        class="custom-blog__banner-overlay"
        style="
          background-color: {{ section.settings.banner_overlay_color }};
          opacity: {{ section.settings.banner_overlay_opacity }};
        "
      ></div>

      <div class="custom-blog__banner-inner banner_section_content_width_{{ section.settings.banner_section_content_width }} banner-align-{{ section.settings.banner_content_position }}">
        <!-- Fallback Image Rendering (Visible only if image missing) -->
        {% unless featured_article.image %}
          <img
            src="{{ section.settings.banner_fallback_image | image_url: width: 1600 }}"
            alt="Fallback image"
            style="position:absolute; inset:0; object-fit:cover; z-index:0;"
          >
        {% endunless %}

        <!-- Category -->
        {% if featured_article.tags.size > 0 %}
          <div class="custom-blog__label">
            {{ featured_article.tags.first }}
          </div>
        {% endif %}

        <!-- Title -->
        <h1 class="custom-blog__heading">
          {{ section.settings.custom_banner_title | default: featured_article.title }}
        </h1>

        <!-- Author & Date -->
        <div class="custom-blog__meta">
          <span class="custom-blog__author">{{ featured_article.author }}</span>
          <span class="custom-blog__date">{{ featured_article.published_at | date: '%B %d, %Y' }}</span>

          <!-- Social Icons -->
          <div class="custom-blog__social-icons">
            {{ section.settings.banner_share_text }}
            {% if section.settings.show_share_tiktok %}
              <a href="https://www.tiktok.com" target="_blank" class="social-icon">{% render 'icon-tiktok' %}</a>
            {% endif %}
            {% if section.settings.show_share_linkedin %}
              <a href="https://www.linkedin.com" target="_blank" class="social-icon">{% render 'icon-linkedin' %}</a>
            {% endif %}
            {% if section.settings.show_share_youtube %}
              <a href="https://www.youtube.com" target="_blank" class="social-icon">{% render 'icon-youtube' %}</a>
            {% endif %}
            {% if section.settings.show_share_facebook %}
              <a href="https://www.facebook.com" target="_blank" class="social-icon">{% render 'icon-facebook' %}</a>
            {% endif %}
            {% if section.settings.show_share_x %}
              <a href="https://x.com" target="_blank" class="social-icon">{% render 'icon-x' %}</a>
            {% endif %}
            {% if section.settings.show_share_pinterest %}
              <a href="https://www.pinterest.com" target="_blank" class="social-icon">{% render 'icon-pinterest' %}</a>
            {% endif %}
            {% if section.settings.show_share_instagram %}
              <a href="https://www.instagram.com" target="_blank" class="social-icon">{% render 'icon-instagram' %}</a>
            {% endif %}
          </div>
        </div>

        <!-- Optional CTA Button -->
        {% if section.settings.banner_cta_text != blank and section.settings.banner_cta_link != blank %}
          <a href="{{ section.settings.banner_cta_link }}" class="custom-blog__banner-cta">
            {{ section.settings.banner_cta_text }}
            {% if section.settings.banner_cta_icon != blank %}
              <span class="custom-blog__cta-icon">{% render section.settings.banner_cta_icon %}</span>
            {% endif %}
          </a>
        {% endif %}
      </div>
    </div>
  {% endif %}

  <!-- Slider -->
  {% comment %} Blog Slider with scroll snapping, dots + arrows (no blocks) {% endcomment %}
  <section
    id="blog-slider-{{ section.id }}"
    class="blog-slider section_width_{{ section.settings.section_width }}"
    style="
      background-color: {{ section.settings.background_color }};
      padding: {{ section.settings.padding_top }}px {{ section.settings.padding_right }}px {{ section.settings.padding_bottom }}px {{ section.settings.padding_left }}px;
      margin: {{ section.settings.margin_top }}px {{ section.settings.margin_right }}px {{ section.settings.margin_bottom }}px {{ section.settings.margin_left }}px;
    "
  >
    {% assign blog_handle = section.settings.blog | default: 'news' %}
    {% assign blog_posts = blogs[blog_handle].articles | slice: 0, 10 %}
    {% if blog_posts.size > 0 %}
      <div class="article-swiper-container">
      <div class="articles-swiper-slider swiper">
        <div class="swiper-wrapper">
          {% for article in blog_posts %}
            <div class="swiper-slide">
            <a href="{{ article.url }}">
              <div class="slider-slide" data-index="{{ forloop.index0 }}">
                <div class="blog-post-card">
                  <div class="blog-post-image-container">
                    {% if article.image %}
                      <img src="{{ article.image | image_url: width: 800 }}" alt="{{ article.title }}">
                    {% endif %}
                    <span class="artcile-blog">
                      {%- assign article_blog = article.url | split: '/' -%}
                      {{- article_blog[2] -}}
                    </span>
                  </div>
                  <div class="blog-post-content">
                    {% comment %}
                      <div class="blog-post-tags">
                        {% for tag in article.tags limit: 2 %}
                          <span class="tag">{{ tag }}</span>
                        {% endfor %}
                      </div>
                    {% endcomment %}
                    <div class="blog-post-date">{{ article.published_at | date: '%B %d, %Y' }}</div>
                    <div class="blog-post-title">{{ article.title }}</div>
                    <div class="custom-blog__card-excerpt-arrow">
                      {% comment %}
                        <p class="custom-blog__card-excerpt">
                          {{ article.excerpt_or_content | strip_html | truncate: 140 }}
                        </p>
                      {% endcomment %}
                      <span class="custom-blog__card-arrow">
                        {% render 'diagonal-bottom-left-arrow.svg' %}
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </a>
            </div>
          {% endfor %}
        </div>
      </div>
      </div>
      <div class="slider-controls section_content_width_{{ section.settings.section_content_width }}">
        <div class="articles-swiper-pagination"></div>
        {% if section.settings.show_arrows %}
          <div class="articles-slider-arrows">
            <button class="slider-arrow prev articles-swiper-button-prev">
              <svg xmlns="http://www.w3.org/2000/svg" width="6" height="10" viewBox="0 0 6 10" fill="none">
                <path d="M0.558235 5.44125H0.556986L5.11449 10C5.34882 9.76559 5.48047 9.44771 5.48047 9.11625C5.48047 8.78479 5.34882 8.46691 5.11449 8.2325L1.88324 5L5.11324 1.7675C5.34757 1.53309 5.47922 1.2152 5.47922 0.88375C5.47922 0.552294 5.34757 0.23441 5.11324 0L0.555735 4.5575C0.438566 4.6747 0.372744 4.83365 0.372744 4.99937C0.372744 5.1651 0.438566 5.32404 0.555735 5.44125H0.558235Z" fill="#636363"/>
              </svg>
            </button>
            <button class="slider-arrow next articles-swiper-button-next">
              <svg xmlns="http://www.w3.org/2000/svg" width="6" height="10" viewBox="0 0 6 10" fill="none">
                <path d="M5.44176 4.55875H5.44301L0.885514 0C0.651176 0.234409 0.519531 0.552295 0.519531 0.88375C0.519531 1.21521 0.651176 1.53309 0.885514 1.7675L4.11676 5L0.886764 8.2325C0.652426 8.46691 0.520781 8.7848 0.520781 9.11625C0.520781 9.44771 0.652426 9.76559 0.886764 10L5.44426 5.4425C5.56143 5.3253 5.62726 5.16635 5.62726 5.00063C5.62726 4.8349 5.56143 4.67596 5.44426 4.55875H5.44176Z" fill="#636363"/>
              </svg>
            </button>
          </div>
        {% endif %}
      </div>
    {% endif %}
  </section>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const articles_slider = new Swiper('.articles-swiper-slider', {
        slidesPerView: 1.2,
        spaceBetween: 24,
        navigation: {
          nextEl: '.articles-swiper-button-next',
          prevEl: '.articles-swiper-button-prev',
        },
        pagination: {
          el: '.articles-swiper-pagination',
          clickable: true
        },
         breakpoints: {
          767: {
            slidesPerView: 2
          },
          1199: {
            slidesPerView: 3
          }
        }
      });
    });
  </script>

  <!-- Blog List Title -->

  <!-- Blog List Title -->
  <div
    class="slider-text {{ section.settings.text_alignment }}"
    style="border-top: 1px solid rgba(0, 0, 0, 0.1); padding-top: 48px; margin-top: 20px !important; padding-bottom: 40px;"
  >
    <div class="slider-heading-small">{{ section.settings.heading }}</div>
    <h2 class="custom-blog__list-title">{{ section.settings.subheading }}</h2>
    <div class="slider-description">{{ section.settings.description }}</div>
  </div>

  <!-- Filter/Sort Row -->

  {% unless section.settings.hide_filter_sort %}
    <div class="custom-blog__filter-sort">
      <button class="custom-blog__filter-btn">
        <span class="icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16">
            <path d="M0 5H16" stroke="#6C707A"/>
            <path d="M0 11H16" stroke="#6C707A"/>
            <path d="M14 3H12V7H14V3Z" fill="#6C707A"/>
            <path d="M5 9H3V13H5V9Z" fill="#6C707A"/>
          </svg>
        </span>
        Filter
      </button>
      <button class="custom-blog__sort-btn">
        <span class="icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16">
            <path d="M3 6L8 11L13 6" stroke="#6C707A"/>
          </svg>
        </span>
        Sort
      </button>
    </div>
  {% endunless %}

  {% paginate blog.articles by 9 %}
    <!-- Blog Grid -->
    <div class="custom-blog__main-layout">
      <div class="custom-blog__grid">
        {% for article in blog.articles %}
          <a href="{{ article.url }}">
            <div class="custom-blog__card" data-category="{{ article.tags | join: ' ' }}">
              <div class="custom-blog__card-image">
                {% if article.image %}
                  <img
                    src="{{ article.image | image_url: width: 600 }}"
                    alt="{{ article.title }}"
                  >
                {% else %}
                  <div class="custom-blog__image-placeholder"></div>
                {% endif %}
                {% if article.tags.size > 0 %}
                  <div class="custom-blog__card-label">{{ article.tags.first }}</div>
                {% endif %}
              </div>

              <div class="custom-blog__card-content">
                <span class="custom-blog__card-date">{{ article.published_at | date: '%B %d, %Y' }}</span>
                <h3 class="custom-blog__card-title">
                  {{ article.title }}
                </h3>
                <div class="custom-blog__card-excerpt-arrow">
                  <p class="custom-blog__card-excerpt">
                    {{ article.excerpt_or_content | strip_html | truncate: 140 }}
                  </p>
                  <span class="custom-blog__card-arrow">
                    {% render 'diagonal-bottom-left-arrow.svg' %}
                  </span>
                </div>
              </div>
            </div>
          </a>
        {% endfor %}
      </div>

      <aside class="custom-blog__sidebar">
        <details class="custom-blog__dropdown">
          <summary class="custom-blog__dropdown-title">
            <span>Sort By</span>
            <svg xmlns="http://www.w3.org/2000/svg" width="13" height="8" viewBox="0 0 13 8" fill="none">
              <path d="M11.7473 7.75861L6.50025 1.85587L1.25317 7.75861C1.07815 7.95554 0.815247 8.04055 0.563499 7.98162C0.31175 7.92269 0.109402 7.72876 0.0326769 7.47289C-0.0440484 7.21702 0.0165058 6.93809 0.191529 6.74115L5.96918 0.241439C6.10591 0.0875377 6.29837 2.7531e-07 6.5 2.84124e-07C6.70164 2.92938e-07 6.8941 0.0875377 7.03083 0.241439L12.8085 6.74115C13.079 7.04559 13.0607 7.52014 12.7676 7.80111C12.4744 8.08207 12.0179 8.06304 11.7473 7.75861Z" fill="#2C2C2C"/>
            </svg>
          </summary>
          <ul class="custom-blog__dropdown-list">
            <li>
              <label><input type="radio" name="filter" value="all"> Latest</label>
            </li>
            <li>
              <label><input type="radio" name="filter" value="top-picks"> Sylvox Top Picks</label>
            </li>
          </ul>
        </details>

        <details class="custom-blog__dropdown">
          <summary class="custom-blog__dropdown-title">
            <span>Filter</span>
            <svg xmlns="http://www.w3.org/2000/svg" width="13" height="8" viewBox="0 0 13 8" fill="none">
              <path d="M11.7473 7.75861L6.50025 1.85587L1.25317 7.75861C1.07815 7.95554 0.815247 8.04055 0.563499 7.98162C0.31175 7.92269 0.109402 7.72876 0.0326769 7.47289C-0.0440484 7.21702 0.0165058 6.93809 0.191529 6.74115L5.96918 0.241439C6.10591 0.0875377 6.29837 2.7531e-07 6.5 2.84124e-07C6.70164 2.92938e-07 6.8941 0.0875377 7.03083 0.241439L12.8085 6.74115C13.079 7.04559 13.0607 7.52014 12.7676 7.80111C12.4744 8.08207 12.0179 8.06304 11.7473 7.75861Z" fill="#2C2C2C"/>
            </svg>
          </summary>
          <ul class="custom-blog__dropdown-list">
            <li>
              <label><input type="radio" name="filter" value="all"> All</label>
            </li>
            {% assign tag_options = blog.all_tags %}
            {% for tag in tag_options %}
              <li>
                <label>
                  <input
                    type="radio"
                    name="filter"
                    value="{{ tag }}"
                    {% if current_tags contains tag %}
                      checked
                    {% endif %}
                  >
                  {{ tag }}
                </label>
              </li>
            {% endfor %}
          </ul>
        </details>
      </aside>
    </div>

    <!-- Pagination -->
    <div class="custom-blog__pagination">
      {% if paginate.previous %}
        <a href="{{ paginate.previous.url }}">&lt;</a>
      {% endif %}
      {% for part in paginate.parts %}
        {% if part.is_link %}
          <a href="{{ part.url }}">{{ part.title }}</a>
        {% else %}
          <span class="current">{{ part.title }}</span>
        {% endif %}
      {% endfor %}
      {% if paginate.next %}
        <a href="{{ paginate.next.url }}">&gt;</a>
      {% endif %}
    </div>
  {% endpaginate %}
</section>

<style>
  #shopify-section-{{ section.id }} .article-swiper-container{
    margin: 0 -24px;
  }
  @media screen and (min-width: 767px) {
    #shopify-section-{{ section.id }} .article-swiper-container{
      margin: 0 -20px;
    }
  }
  
  #shopify-section-{{ section.id }} .articles-swiper-slider{
    padding: 30px 24px;
  }
  #shopify-section-{{ section.id }} .articles-swiper-pagination span.swiper-pagination-bullet {
    width: 25px;
    height: 2px;
    border-radius: 0;
  }
  #shopify-section-{{ section.id }} .articles-swiper-pagination span.swiper-pagination-bullet.swiper-pagination-bullet-active{
    background-color: #db4b97;
  }
  #shopify-section-{{ section.id }} .articles-slider-arrows{
    display: flex;
    gap: 4px;
  }
  #shopify-section-{{ section.id }} .articles-slider-arrows button {
    display: flex;
    width: 32px;
    height: 32px;
    justify-content: center;
    align-items: center;
    border: 1px solid #636363;
  }
  #shopify-section-{{ section.id }} .blog-post-image-container{
    position: relative;
  }
  #shopify-section-{{ section.id }} .blog-post-image-container span.artcile-blog {
    position: absolute;
    background: #336256;
    bottom: 20px;
    left: 20px;
    padding: 6px 10px;
    color: #fff;
    font-size: 14px;
    font-weight: 300;
    text-transform: uppercase;
  }
  #shopify-section-{{ section.id }} .slider-controls{
    padding: 0 !important;
    flex-direction: column;
    align-items: flex-end;
    gap: 20px;
  }
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Elements
  const articleGrid = document.querySelector('.custom-blog__grid');
  const filterInputs = document.querySelectorAll('input[name="filter"]');
  const allFilterInput = document.querySelector('input[value="all"]');
  const paginationContainer = document.querySelector('.custom-blog__pagination');
  const blogHandle = window.location.pathname.split('/')[2]; // Extract blog handle from URL
  
  // Add event listeners to filter inputs
  filterInputs.forEach(input => {
    input.addEventListener('change', handleFilterChange);
  });
  
  if (allFilterInput) {
    allFilterInput.addEventListener('change', handleFilterChange);
  }

  function handleFilterChange(e) {
    const selectedValue = e.target.value;
    if (selectedValue) {
      fetchFilteredArticles(selectedValue);
    }
  }

  function toHandleCase(str) {
    return str
        .toLowerCase()
        .trim()
        .replace(/\s+/g, '-')
        .replace(/[^\w-]+/g, '')
        .replace(/--+/g, '-')
        .replace(/^-+|-+$/g, '');
  }

  function fetchFilteredArticles(tag) {
    // Show loading state
    const originalContent = articleGrid.innerHTML;
    articleGrid.innerHTML = '<div class="loading" style="text-align: center; padding: 2rem; font-size: 1.1rem; color: #666;">Loading articles...</div>';
    
    console.log(tag)
    let url = `/blogs/${blogHandle}/tagged/${toHandleCase(tag)}`;
    if (tag === 'all') {
      url = `/blogs/${blogHandle}`;
    }
    
    
    fetch(url)
      .then(response => response.text())
      .then(html => {
        // Parse the HTML response
        const parser = new DOMParser();
        const doc = parser.parseFromString(html, 'text/html');
        
        // Extract the grid content from the response
        const newGrid = doc.querySelector('.custom-blog__grid');
        const newPagination = doc.querySelector('.custom-blog__pagination');
        
        if (newGrid) {
          // Update the article grid
          articleGrid.innerHTML = newGrid.innerHTML;
          
          // Update pagination if exists
          if (newPagination && paginationContainer) {
            paginationContainer.innerHTML = newPagination.innerHTML;
          } else if (paginationContainer) {
            paginationContainer.innerHTML = '';
          }
          
          // Update URL without reloading the page
          window.history.pushState({}, '', url);
        } else {
          // No results found
          articleGrid.innerHTML = '<div class="no-results" style="text-align: center; padding: 2rem; font-size: 1.1rem; color: #666;">No articles found for this tag.</div>';
          if (paginationContainer) {
            paginationContainer.innerHTML = '';
          }
        }
      })
      .catch(error => {
        console.error('Error fetching articles:', error);
        articleGrid.innerHTML = '<div class="error" style="text-align: center; padding: 2rem; font-size: 1.1rem; color: #d32f2f;">Error loading articles. Please try again.</div>';
        // Revert to original content on error
        setTimeout(() => {
          articleGrid.innerHTML = originalContent;
        }, 2000);
      });
  }

  // Handle browser back/forward buttons
  window.addEventListener('popstate', function() {
    window.location.reload();
  });
});
</script>

{% schema %}
{
  "name": "Custom Blog",
  "tag": "section",
  "class": "custom-blog",
  "settings": [
    {
      "type": "header",
      "content": "Banner Settings"
    },
    {
      "type": "select",
      "id": "banner_section_width",
      "label": "Section Width",
      "default": "standard",
      "options": [
        { "value": "standard", "label": "Standard Width" },
        { "value": "full", "label": "Full Width" }
      ]
    },
    {
      "type": "select",
      "id": "banner_section_content_width",
      "label": "Content Width",
      "default": "standard",
      "options": [
        { "value": "standard", "label": "Standard Width" },
        { "value": "full", "label": "Full Width" }
      ]
    },
    {
      "type": "image_picker",
      "id": "custom_banner_override_image",
      "label": "Override Banner Image (optional)"
    },
    {
      "type": "image_picker",
      "id": "custom_banner_image_mob",
      "label": "Mobile Image (optional)"
    },
    { "type": "color", "id": "banner_overlay_color", "label": "Banner Overlay Color", "default": "#000000" },
    {
      "type": "range",
      "id": "banner_overlay_opacity",
      "label": "Banner Overlay Opacity",
      "min": 0,
      "max": 1,
      "step": 0.1,
      "default": 0.4
    },
    {
      "type": "select",
      "id": "banner_content_position",
      "label": "Banner Content Vertical Alignment",
      "options": [
        { "value": "top", "label": "Top" },
        { "value": "center", "label": "Center" },
        { "value": "bottom", "label": "Bottom" }
      ],
      "default": "center"
    },
    {
      "type": "text",
      "id": "banner_cta_text",
      "label": "CTA Button Text"
    },
    {
      "type": "url",
      "id": "banner_cta_link",
      "label": "CTA Button Link"
    },
    {
      "type": "text",
      "id": "banner_cta_icon",
      "label": "CTA Icon Snippet (e.g. 'icon-arrow-right')"
    },
    {
      "type": "header",
      "content": "Social Share Options"
    },
    {
      "type": "text",
      "id": "banner_share_text",
      "label": "Social Share Text"
    },
    {
      "type": "checkbox",
      "id": "show_share_tiktok",
      "label": "Show TikTok Share",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "show_share_linkedin",
      "label": "Show LinkedIn Share",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "show_share_youtube",
      "label": "Show YouTube Share",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "show_share_facebook",
      "label": "Show Facebook Share",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "show_share_x",
      "label": "Show X (Twitter) Share",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "show_share_pinterest",
      "label": "Show Pinterest Share",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "show_share_instagram",
      "label": "Show Instagram Share",
      "default": false
    },

    {
      "type": "text",
      "id": "custom_banner_title",
      "label": "Custom Banner Title (optional)"
    },
    {
      "type": "text",
      "id": "blog_list_title",
      "label": "Blog List Section Title",
      "default": "More Articles"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background Color",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "Slider Settings"
    },
    {
      "type": "select",
      "id": "section_width",
      "label": "Section Width",
      "default": "standard",
      "options": [
        { "value": "standard", "label": "Standard Width" },
        { "value": "full", "label": "Full Width" }
      ]
    },
    {
      "type": "select",
      "id": "section_content_width",
      "label": "Content Width",
      "default": "standard",
      "options": [
        { "value": "standard", "label": "Standard Width" },
        { "value": "full", "label": "Full Width" }
      ]
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#ffffff"
    },
    { "type": "range", "id": "padding_top", "label": "Padding Top", "min": 0, "max": 100, "step": 5, "default": 40 },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Padding Bottom",
      "min": 0,
      "max": 100,
      "step": 5,
      "default": 40
    },
    { "type": "range", "id": "padding_left", "label": "Padding Left", "min": 0, "max": 100, "step": 5, "default": 20 },
    {
      "type": "range",
      "id": "padding_right",
      "label": "Padding Right",
      "min": 0,
      "max": 100,
      "step": 5,
      "default": 20
    },
    { "type": "range", "id": "margin_top", "label": "Margin Top", "min": 0, "max": 100, "step": 5, "default": 0 },
    { "type": "range", "id": "margin_bottom", "label": "Margin Bottom", "min": 0, "max": 100, "step": 5, "default": 0 },
    { "type": "range", "id": "margin_left", "label": "Margin Left", "min": 0, "max": 100, "step": 5, "default": 0 },
    { "type": "range", "id": "margin_right", "label": "Margin Right", "min": 0, "max": 100, "step": 5, "default": 0 },
    {
      "type": "select",
      "id": "text_alignment",
      "label": "Text Alignment",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ],
      "default": "left"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Small Heading",
      "default": "Latest News"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Main Heading",
      "default": "From the Blog"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Section Description",
      "default": "See what's new at Sylvox."
    },
    {
      "type": "range",
      "id": "slide_width",
      "label": "Slide Width",
      "min": 280,
      "max": 1000,
      "step": 20,
      "default": 360
    },
    {
      "type": "checkbox",
      "id": "show_arrows",
      "label": "Show Arrows",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "hide_filter_sort",
      "label": "Hide Filter and Sort",
      "default": false
    }
  ],
  "presets": [
    {
      "name": "Custom Blog",
      "category": "Custom"
    }
  ]
}
{% endschema %}

{% style %}
  /* Banner */

  .custom-blog__banner {
    position: relative;
    display: flex;
    align-items: stretch;
    height: 600px;
    background-size: cover;
    background-position: center;
    color: #ffffff;
    overflow: hidden;
  }

  .custom-blog__banner-cta {
      background: #20413B !important;
    color: #ffffff !important;
      padding: 12px 24px;
      border-radius: 9999px;
      font-weight: 300!important;
      display: inline-block;
      margin-top: 20px;
      text-decoration: none;
      width: 150px !important;
  }

  .custom-blog__banner-overlay {
    position: absolute;
    inset: 0;
    z-index: 1;
    pointer-events: none;
  }

  .custom-blog__banner-inner {
    position: relative;
    z-index: 2;
    display: flex;
    flex-direction: column;
    gap: 20px;
    padding: 40px;
    height: 100%;
    width: 100%;
  }

  .custom-blog__cta-icon {
    margin-left: 10px;
    display: inline-flex;
    align-items: center;
  }


  .custom-blog__meta {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 16px;
    color: #fff;
    font-size: 18px;
  }
  .custom-blog__social-icons {
    display: flex;
    gap: 12px;
  }
  .social-icon {
    color: #fff;
    text-decoration: none;
    font-size: 14px;
    opacity: 0.7;
  }
  .social-icon:hover {
    opacity: 1;
  }
  .custom-blog__banner-cta {
    background: #ffffff;
    color: #1a1a1a;
    padding: 12px 24px;
    border-radius: 9999px;
    font-weight: 500;
    display: flex;
    justify-content: center;
    margin-top: 20px;
    text-decoration: none;
    line-height: 1;
    font-size: 14px;
  }


  /* Alignment variations */
  .banner-align-top {
    justify-content: flex-start;
  }
  .banner-align-center {
    justify-content: center;
  }
  .banner-align-bottom {
    justify-content: flex-end;
  }


  .custom-blog__card-excerpt-arrow {
    position: relative;
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }

  .custom-blog__card-arrow {
    position: absolute;
    bottom: 20px;
    right: 20px;
  }
  .blog-post-content {
    background: #FAFAFA;
    padding: 1.5em;
    position: relative;
  }


  /* Sidebar */

  .custom-blog__sidebar {
    display: flex;
    flex-direction: column;
    gap: 32px;
    max-width: 280px;
    min-width: 200px;
    flex: 1 1 280px;
  }

  .custom-blog__dropdown {
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    padding-bottom: 24px;
  }

  .custom-blog__dropdown-title {
    color: #2C2C2C;
    font-size: 18px;
    font-style: normal;
    font-weight: 400;
    line-height: normal;
    cursor: pointer;
    list-style: none;
    position: relative;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }


  .custom-blog__dropdown[open] svg {
    transform: rotate(180deg);
  }

  .custom-blog__dropdown-list {
    margin-top: 16px;
    list-style: none;
    padding-left: 0;
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-top: 50px;
  }

  .custom-blog__dropdown-list li {
    margin-bottom: 25px;
  }

  #shopify-section-{{ section.id }} .custom-blog__dropdown-list li label {
    color: var(--Dark-Grey, #636363);
    font-size: 16px;
    font-weight: 300;
    line-height: normal;
    letter-spacing: 0.176px;
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    margin-bottom: 0;
    text-transform: capitalize;
  }

  .custom-blog__dropdown-list input[type="radio"] {
    appearance: none;
    width: 14px;
    height: 14px;
    border: 1px solid #636363;
    border-radius: 50%;
    position: relative;
  }

  .custom-blog__dropdown-list input[type="radio"]:checked::before {
    content: '';
    position: absolute;
    top: 1px;
    left: 1px;
    width: 10px;
    height: 10px;
    background: #636363;
    border-radius: 50%;
  }


  /* Slider */
  .slider-track {
      display: flex;
      overflow-x: auto;
      gap: 24px;
      scroll-snap-type: x mandatory;
      scroll-behavior: smooth;
      padding-bottom: 1rem;
    }

  .slider-slide {
    flex: 0 0 auto;
    width: 100%;
    display: flex;
    flex-direction: column;
    height: 100%;
  }

  .blog-post-card {
    flex: 1;
    display: flex;
    flex-direction: column;
    background: white;
    height: 100%;
  }

  .blog-post-card,
  .blog-post-content {
    flex-grow: 1;
    display: flex;
    flex-flow: column;
  }

  .slider-carousel .slider-track {
    align-items: stretch;
  }



    .slider-controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .slider-dots {
      display: flex;
      gap: 8px;
    }

    .slider-dot {
      width: 24px;
      height: 25px;
      background: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='24' height='25'><rect x='4' y='11.95' width='16' height='2' rx='1' fill='%23636363'/></svg>") no-repeat center center;
      background-size: contain;
      cursor: pointer;
    }

    .slider-dot.active {
      background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='24' height='25'><rect x='4' y='11.95' width='16' height='2' rx='1' fill='%23DB4B97'/></svg>");
    }

    .slider-arrows {
      display: flex;
      gap: 10px;
    }

    .slider-arrow {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: 1px solid #000;
      background: white;
      cursor: pointer;
      font-size: 1.5rem;
    }

  .slider-track {
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE 10+ */
  }

  .slider-track::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
  }


    .blog-post-card img {
    width: 100%;
    height: 260px;
    object-fit: cover;
  }

  .blog-post-content {
      background: #FAFAFA;
      padding: 1.5em;
  }

  .custom-blog .blog-post-date {
    color: var(--Dark-Grey, #636363);
    font-size: 14px;
    font-style: normal;
    font-weight: 300;
    line-height: normal;
    margin-bottom: 12px;
  }

  .custom-blog .blog-post-title {
    color: var(--Black, #1D1D1B);
    font-size: 20px;
    font-style: normal;
    font-weight: 400;
    line-height: 1.2;
    min-height: 72px;
  }

  .custom-blog .slider-text {
    max-width: 1608px;
    padding: 0 25px;
    margin: 0 auto;
  }
  .custom-blog .slider-text .custom-blog__list-title {
    color: var(--Black, #1D1D1B);
    font-size: 32px;
    font-style: normal;
    font-weight: 400;
    line-height: normal;
    margin-bottom: 8px;
  }


  .custom-blog__slider {
    max-width: 1600px;
    margin: 40px auto;
  }
  .custom-blog__slider-item {
    width: 300px;
    margin-right: 20px;
  }
  .custom-blog__slider-item img {
    width: 100%;
    height: auto;
    border-radius: 4px;
    object-fit: cover;
  }
  .custom-blog__slider-caption {
    padding-top: 10px;
  }
  .custom-blog__slider-date {
    font-size: 12px;
    color: #777;
  }
  .custom-blog__slider-title {
    font-size: 16px;
    font-weight: 500;
    color: #1D1D1B;
  }
  /* New CSS */
  .custom-blog__banner {
    height: 600px;
    overflow: hidden;
    background-size: cover;
    background-position: center;
    color: #ffffff;
  }
  .custom-blog__banner-inner {
    /* position: absolute;
    left: 157px;
    top: 154.5px; */
    gap: 20px;
    display: flex;
    flex-direction: column;
  }
  .custom-blog__label {
    /* padding: 6px 10px; */
    /* background: #1D1D1B; */
    font-size: 16px;
    font-weight: 400;
    font-family: Roboto, sans-serif;
    color: white;
    display: inline-flex;
    align-items: center;
    width: max-content;
  }
  .custom-blog__subtitle {
    font-size: 18px;
    font-weight: 400;
    color: white;
  }
  .custom-blog__heading {
    font-size: 40px;
    font-style: normal;
    font-weight: 400;
    line-height: normal;
    margin-bottom: 0;
  }
  @media screen and (min-width: 1200px) {
    .custom-blog__heading {
      max-width: 871px;
    }
  }
  @media screen and (max-width: 1024px) {
    .custom-blog__heading {
      font-size: 30px;
      max-width: 650px;
    }
  }

  .custom-blog__arrow {
    display: inline-flex;
    align-items: center;
    justify-content: left;
    border-radius: 4px;
    width: auto;
    height: auto;
  }
   .custom-blog__arrow rect {
    stroke: #ffffff;
   }
    .custom-blog__arrow path {
    fill: #ffffff;
  }
  .custom-blog__nav {
    background-color: #1a1a1a;
    margin-bottom: 40px;
  }
  .custom-blog__nav ul {
    display: flex;
    justify-content: center;
    gap: 48px;
    list-style: none;
    margin: 0 auto;
    padding: 0;
    height: 60px;
    align-items: center;
    border-bottom: 1px solid rgba(255, 255, 255, 0.2);
  }
  .custom-blog__nav a {
    font-size: 14px;
    color: #ffffff;
    text-decoration: none;
    font-weight: 400;
    position: relative;
    padding-bottom: 12px;
  }
  .custom-blog__nav a.active {
    font-weight: 600;
  }
  .custom-blog__nav a.active::after {
    content: "";
    position: absolute;
    left: 50%;
    bottom: -1px;
    transform: translateX(-50%);
    height: 2px;
    width: 24px;
    background: #ffffff;
  }
  .custom-blog__filter-sort {
    display: flex;
    justify-content: left;
    gap: 16px;
    margin: 40px auto;
    max-width: 1608px;
  }
  .custom-blog__filter-btn,
  .custom-blog__sort-btn {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 8px 20px;
    font-size: 14px;
    font-weight: 500;
    background: #ffffff;
    color: #1a1a1a;
    border: 1px solid #bdbdbd;
    border-radius: 9999px;
    cursor: pointer;
  }
  .custom-blog__main-layout{
    display: flex;
    gap: 25px;
    max-width: 1608px;
    margin: 0 auto;
  }
  .custom-blog__grid {
    display: flex;
    flex-direction: column;
    gap: 24px;
    margin: 0 auto 60px;
    padding: 0;
    flex: 1 1 1250px;
  }
  .custom-blog__card {
    background: #fff;
    display: flex;
    flex-direction: row;
    border-radius: 4px;
    overflow: hidden;
    position: relative;
    /* max-width: 519.98px; */
    width: 100%;
    display: flex;
  }
  .slider-slide:hover,
  .custom-blog__card:hover {
    box-shadow: 0 4px 28.5px 0 rgba(32, 65, 59, 0.14);
  }
  .slider-slide:hover .blog-post-title,
  .custom-blog__card:hover .custom-blog__card-title {
    text-decoration: underline;
  }
  .custom-blog__card-image {
    position: relative;
        flex: 1 1 520px;
  }
  .custom-blog__card-image img {
      width: 100%;
      height: 100%;
      aspect-ratio: 520/288;
      min-width: 340px;
      object-fit: cover;
  }
  .custom-blog__card-content {
    background: #FAFAFA;
    padding: 40px;
    border-radius: 4px;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    justify-content: space-between;
    gap: 10px;
    flex: 1 1 721px;
  }
  .custom-blog__card-image .custom-blog__card-label {
    background: #336256;
    position: absolute;
    bottom: 20px;
    left: 20px;
    z-index: 2;
    color: #FFF;
    font-size: 14px;
    font-weight: 300;
    line-height: normal;
    padding: 6px 10px;
    text-transform: uppercase;
  }
  .custom-blog__card-date {
  color: var(--Dark-Grey, #636363);
  font-size: 14px;
  font-style: normal;
  font-weight: 300;
  line-height: normal;
  }
  .custom-blog__card-title {
  color: var(--Black, #1D1D1B);
  font-size: 24px;
  font-style: normal;
  font-weight: 400;
  line-height: normal;
  }
  .custom-blog__card-title a {
    text-decoration: none;
  }
  .custom-blog__card-excerpt-arrow {
    width: 100%;
    display: flex;
    align-items: flex-end;
    gap: 12px;
  }
  .custom-blog__card-excerpt {
    font-size: 14px;
    font-family: 'Roboto', sans-serif;
    font-weight: 400;
    line-height: 1.6;
    color: #636363;
    max-height: none;
    overflow: visible;
    margin: 0;
  }
  .custom-blog__card-arrow {
    position: static;
    display: inline-flex;
    justify-content: center;
    align-items: center;
    padding: 0;
    border-radius: 2px;
    width: 36px;
    height: 31px;
  }
  .custom-blog__pagination {
    text-align: center;
    margin-bottom: 80px;
  }
  .custom-blog__pagination a,
  .custom-blog__pagination span {
    margin: 0 4px;
    padding: 8px 12px;
    font-size: 14px;
    text-decoration: none;
    color: #1a1a1a;
    border-radius: 4px;
  }
  .custom-blog__pagination .current {
    font-weight: bold;
  }
  @media screen and (max-width: 1024px) {
    .custom-blog__card {
      flex-direction: column
    }
    .custom-blog__dropdown-list{
      margin-left: 8px;
    }
    .custom-blog__card-image,
    .custom-blog__card-content {
      flex: auto;
    }
  }
  @media screen and (max-width: 767px) {
    .custom-blog__banner {
      height: 600px;
      background-position: center;
    }
    .custom-blog__banner-inner {
      top: auto;
      left: 0;
      gap: 10px;
      max-width: 100%;
      margin: 0 !important;
    }
    .custom-blog__label {
      font-size: 14px;
    }
    .custom-blog__subtitle {
      font-size: 14px;
    }
    .custom-blog__heading {
      font-size: 28px;
      max-width: 100%;
      line-height: 1.3;
    }
    .blog-slider .slider-track > a,
    .custom-blog__grid > a {
      min-width: 100%;
    }
    .custom-blog__grid {
      grid-template-columns: repeat(1, 1fr);
      margin: 40px 24px;
      gap: 24px;
    }
    .custom-blog .blog-post-title{
      font-size: 16px;
    }
    .custom-blog__card-title{
      font-size: 18px;
    }
    #shopify-section-{{ section.id }} .custom-blog__sidebar{
      flex: auto;
    }
    
  }
{% endstyle %}
