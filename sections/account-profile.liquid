{{ 'accounts.css' | asset_url | stylesheet_tag }}

<div class="account-wrapper section_content_width_{{ section.settings.section_content_width }}">
  <aside class="account-sidebar">
    {% render 'account-sidebar' %}
  </aside>

  <main class="account-content section_width_{{ section.settings.section_width }}">
    <div class="account-profile-wrapper">
      <!-- Top user info and banner -->
      <div class="account-profile-header">
        <div class="user-info">
          <h2>{{ customer.first_name | default: 'User' }} {{ customer.last_name }}</h2>
          <p>Email: {{ customer.email }}</p>
          <p>{{ customer.default_address.country }}</p>
        </div>
        <div class="points-banner">
          <img
            src="{{ section.settings.points_icon | image_url }}"
            alt=""
            width="45"
            height="45"
          >
          <div class="left">
            <p class="subheading">Sylvox Membership</p>
            <p class="title">Join the club, get rewarded.</p>
            {% if section.settings.learn_more_link != blank %}
              <a href="{{ section.settings.learn_more_link }}" class="learn-more">
                {{ section.settings.learn_more_text }}
              </a>
            {% endif %}
          </div>
          <div class="right">
            <p class="balance">00</p>
            <p class="points">points</p>
            <p class="label">Points Balance ></p>
          </div>
        </div>
      </div>

      <!-- Earn Points to Win -->
      <div class="rewards-section">
        <h3>Earn Points to Win</h3>
        <div class="rewards-grid">
          {% for block in section.blocks %}
            {% if block.type == 'reward_item' %}
              <div
                class="reward-item"
                {{ block.shopify_attributes }}
                style="--reward-icon-size: {{ block.settings.icon_size }}px;"
              >
                {% if block.settings.icon != blank %}
                  <img
                    src="{{ block.settings.icon | img_url: '200x' }}"
                    alt="{{ block.settings.title | escape }}"
                    loading="lazy"
                    width="{{ block.settings.icon_size }}"
                    height="{{ block.settings.icon_size }}"
                  >
                {% endif %}
                {% if block.settings.title != blank %}
                  <p class="title">{{ block.settings.title }}</p>
                {% endif %}
                {% if block.settings.points_text != blank %}
                  <p class="points">{{ block.settings.points_text }}</p>
                {% endif %}
              </div>
            {% endif %}
          {% endfor %}
        </div>
      </div>

      <!-- How to Earn Points -->
      <div class="rewards-section earn-methods">
        <div class="section-header">
          <h3>How to Earn Points</h3>
          {% if section.settings.earn_more_link != blank %}
            <a href="{{ section.settings.earn_more_link }}" class="learn-more">
              {{ section.settings.earn_more_text }}
            </a>
          {% endif %}
        </div>

        <div class="earn-grid">
          {% for block in section.blocks %}
            {% if block.type == 'earn_item' %}
              <div class="earn-item" {{ block.shopify_attributes }}>
                {% if block.settings.title != blank %}
                  <span class="title">{{ block.settings.title }}</span>
                {% endif %}
                {% if block.settings.desc != blank %}
                  <span class="desc">{{ block.settings.desc }}</span>
                {% endif %}
              </div>
            {% endif %}
          {% endfor %}
        </div>
      </div>
    </div>
  </main>
</div>

{% schema %}
{
  "name": "Account Profile",
  "settings": [
    {
      "type": "select",
      "id": "section_width",
      "label": "Section Width",
      "default": "standard",
      "options": [
        { "value": "standard", "label": "50% Width" },
        { "value": "full", "label": "Full Width" }
      ]
    },
    {
      "type": "select",
      "id": "section_content_width",
      "label": "Content Width",
      "default": "standard",
      "options": [
        { "value": "standard", "label": "50% Width" },
        { "value": "full", "label": "Full Width" }
      ]
    },
    {
      "type": "image_picker",
      "id": "points_icon",
      "label": "Icon"
    },
    {
      "type": "text",
      "id": "learn_more_text",
      "label": "'Learn More' Link Text",
      "default": "Learn more →"
    },
    {
      "type": "url",
      "id": "learn_more_link",
      "label": "'Learn More' Link URL"
    },
    {
      "type": "text",
      "id": "earn_more_text",
      "label": "'Earn More' Link Text",
      "default": "Learn more →"
    },
    {
      "type": "url",
      "id": "earn_more_link",
      "label": "'Earn More' Link URL"
    }
  ],
  "blocks": [
    {
      "type": "reward_item",
      "name": "Reward item",
      "settings": [
        { "type": "image_picker", "id": "icon", "label": "Icon" },
        {
          "type": "range",
          "id": "icon_size",
          "label": "Icon size (px)",
          "min": 16,
          "max": 160,
          "step": 2,
          "default": 40
        },
        { "type": "text", "id": "title", "label": "Title", "default": "Free 12V Soundbar" },
        { "type": "text", "id": "points_text", "label": "Points text", "default": "$1000 Points" }
      ]
    },
    {
      "type": "earn_item",
      "name": "Earn item",
      "settings": [
        { "type": "text", "id": "title", "label": "Title", "default": "Create account" },
        { "type": "text", "id": "desc", "label": "Description", "default": "5% Off discount" }
      ]
    }
  ],
  "max_blocks": 30,
  "presets": [
    {
      "name": "Account Profile",
      "blocks": [
        { "type": "reward_item" },
        { "type": "reward_item" },

        { "type": "earn_item", "settings": { "title": "Create account", "desc": "5% Off discount" } },
        { "type": "earn_item", "settings": { "title": "Leave a product review", "desc": "10 - 15 points" } },
        { "type": "earn_item", "settings": { "title": "Place an order", "desc": "1 point for every $1.00" } },
        { "type": "earn_item", "settings": { "title": "Sign up for SMS", "desc": "100 points" } },
        { "type": "earn_item", "settings": { "title": "Make your 2nd purchase", "desc": "1.5 point for every $1.00" } },
        { "type": "earn_item", "settings": { "title": "Celebrate a birthday", "desc": "100 points" } },
        { "type": "earn_item", "settings": { "title": "Follow on Instagram", "desc": "20 points" } },
        { "type": "earn_item", "settings": { "title": "Follow on X", "desc": "20 points" } }
      ]
    }
  ]
}
{% endschema %}
