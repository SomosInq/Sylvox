{{ 'kik-early-access.css' | asset_url | stylesheet_tag }}
<style>
      #shopify-section-{{ section.id }}  .kik_white_text h1,
      #shopify-section-{{ section.id }} .kik_white_text h2,
      #shopify-section-{{ section.id }} .kik_white_text h3,
      #shopify-section-{{ section.id }} .kik_white_text h4,
      #shopify-section-{{ section.id }} .kik_white_text h5,
      #shopify-section-{{ section.id }} .kik_white_text p,
      #shopify-section-{{ section.id }} .kik_white_text span:not(.t4s-mb__menu span):not(.t4s-product__info-wrapper span){
       color: {{section.settings.cl-text}};
    }
  @media only screen and (min-width: 1000px) {
  #shopify-section-{{ section.id }}  .early_access_item:nth-child(2) .item_right_text{
        padding:24px;
        border-left: 3px dashed #5079E4;
        position:relative;
      }
  #shopify-section-{{ section.id }}  .early_access_item:nth-child(even) .item_right_text:before, .early_access_item:nth-child(even) .item_right_text:after{
        content: "";
        display: block;
        height: 20px;
        width: 20px;
        border-radius: 50%;
        background: linear-gradient( #6C91EB, #5079E4);
        position: absolute;
      }
      #shopify-section-{{ section.id }}  .early_access_item:nth-child(2) {
      overflow: hidden;
      }
  }
  #shopify-section-{{ section.id }}  .kik_early_access{
      padding-top:56px;
      padding-bottom:56px;
      {% if section.settings.image != blank %}
      background:url({{section.settings.image | img_url:"master"}});
      background-size:cover;
      {% else %}
      background:{{section.settings.bk}};
      {% endif %}
      background-size:cover;
    }
  #shopify-section-{{ section.id }} .kik_early_access h1{
        font-size:48px;
        line-height:54px;
        text-align:center;
        margin:0;
        margin-bottom:8px;
        }
  #shopify-section-{{ section.id }} .kik_early_access > div > p{
        font-size:21px;
        line-height:27px;
        text-align:center;
        margin:0;
        }
  #shopify-section-{{ section.id }} .early_access_timer{
          margin:24px 0;
          }
     #shopify-section-{{ section.id }}  .early_access_blocks{
        /* display:flex;
        column-gap:32px; */
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 32px;
      }
     #shopify-section-{{ section.id }}  .early_access_item{
        flex:0 0 calc(50% - 16px);
        border-radius:20px;
        background: linear-gradient(90deg, #0047BB 0%, #2B7CFF 30%, #2B7CFF 70%, #1966E2 100%);
      }
     #shopify-section-{{ section.id }}  .early_access_item{
        display:flex;
        align-items:center;
        /* new */
        overflow: hidden;
      }
     #shopify-section-{{ section.id }}  .item_left_image{
        flex:0 0 30%;
        display:flex;
        align-items:center;
      }
     #shopify-section-{{ section.id }} .item_left_image img{
        width:100%;
      }
    #shopify-section-{{ section.id }} .item_right_text{
        padding:24px;
        border-left: 3px dashed #2353D9;
        position:relative;
        /* new */
        word-wrap: break-word;
        word-break: break-word;
        height: 100%;
      }
    #shopify-section-{{ section.id }} .item_right_text:before,
    #shopify-section-{{ section.id }} .item_right_text:after{
        content: "";
        display: block;
        height: 20px;
        width: 20px;
        border-radius: 50%;
        background: #2353D9;
        position: absolute;

      }
    #shopify-section-{{ section.id }} .item_right_text:before{
        top: -10px;
        left: -10px;
      }
    #shopify-section-{{ section.id }} .item_right_text:after{
        bottom: -10px;
        left: -11px;
      }
    #shopify-section-{{ section.id }} .item_right_text .item_discounted{
        display:flex;
        align-items:center;
        margin-bottom:24px;
      }
    #shopify-section-{{ section.id }} .item_right_text .item_discounted p{
        font-size:48px;
        line-height:1.2;
        font-weight:700;
        margin-right:4px;
        margin:0;
      }
    #shopify-section-{{ section.id }} .item_right_text .item_discounted span{
        font-size:20px;
        line-height:1.2;
        font-weight:700;
      }
    #shopify-section-{{ section.id }} .item_promo_code{
        opacity:0.8;
        border:1px solid white;
        border-radius:12px;
       /* overflow:hidden;*/
        display:flex;
        align-items:center;
        margin-bottom:24px;
      }
    #shopify-section-{{ section.id }} .item_promo_code > div:nth-child(1){
        padding-left:16px;
        flex:1;
        display:flex;
        align-items:center;
      }
     #shopify-section-{{ section.id }} .item_promo_code > div:nth-child(1) p{
        font-size:21px;
        line-height:25.2px;
        font-weight:700;
        margin:0;
        margin-left:8px;
      }
    #shopify-section-{{ section.id }} .item_promo_code > div:nth-child(2){
        height:52px;
        width:50px;
        flex: 0 0 50px;
        background:#0047BB;
        display:flex;
        align-items:center;
        justify-content:center;
        cursor:pointer;
        border-radius: 0px 12px 12px 0;
      }
    #shopify-section-{{ section.id }} .item_promo_code > div:nth-child(2) svg{
        width:18px;
        height:20px;
      }
    #shopify-section-{{ section.id }} .item_bottom{
        font-size:18px;
        line-height:1.2;
        font-weight:500;
        margin:0;
      }
      #shopify-section-{{ section.id }}  .kik_banner_timer #countdown ul{
      display:flex;
      column-gap:12px;
      align-items:center;
      color:white;
      padding:0;
      margin-bottom:32px;
    }
    #shopify-section-{{ section.id }}  .kik_banner_timer #countdown ul li{
      display: flex;
      flex-direction: column;
      align-items: center;

    }
    #shopify-section-{{ section.id }}  .kik_banner_timer #countdown ul li span:first-child{
      width: 64px;
      height: 72px;
      border: 1px solid {{section.settings.cl-bg-a}};
      border-radius: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 32px;
      line-height: 56px;
      font-weight: 500;
      margin-bottom: 8px;
      color: {{section.settings.cl-text}};
      background-color: {{section.settings.cl-bg}}
    }
    #shopify-section-{{ section.id }}  .kik_banner_timer #countdown ul li span:last-child{
       font-size: 18px;
        line-height: 24px;
    }
    #shopify-section-{{ section.id }} .kik_early_access .kik_banner_timer #countdown ul {
       margin-top:32px;
       justify-content:center;
    }
     #shopify-section-{{ section.id }} .kik_early_access .kik_banner_timer #countdown ul li span:first-child{
        background: linear-gradient(156deg, #FFF 41.84%, rgba(153, 153, 153, 0.00) 224.65%);
        border: unset;
        color: #0047BB;
      }

    @media (max-width:768px) {
      #shopify-section-{{ section.id }} .early_access_blocks{
          grid-template-columns: 1fr;
          gap: 32px;
        }
      }
    @media (max-width:767.98px){
      #shopify-section-{{ section.id }} .kik_early_access{
          {% if section.settings.mobile_image != blank %}
          background:url({{section.settings.mobile_image | img_url:"master"}});
          {% endif %}
        }
      #shopify-section-{{ section.id }} .kik_early_access h1{
            font-size:32px;
              line-height:38.4px;
            }
      #shopify-section-{{ section.id }} .kik_early_access > div > p{
            font-size:18px;
              line-height:1.2;
            }
      #shopify-section-{{ section.id }} .early_access_timer{
                  margin:24px 0;
              }
      #shopify-section-{{ section.id }} .early_access_blocks{
            display:flex;
            column-gap:0px;
            row-gap:20px;
            flex-wrap:wrap;
          }
      #shopify-section-{{ section.id }} .early_access_item{
            flex:0 0 100%;
          }
      #shopify-section-{{ section.id }} .item_right_text{
            padding:16px 24px;
          }
      #shopify-section-{{ section.id }} .item_right_text .item_discounted{
            margin-bottom:16px;
          }
      #shopify-section-{{ section.id }} .item_right_text .item_discounted p{
            font-size:40px;
          }
      #shopify-section-{{ section.id }} .item_right_text .item_discounted span{
            font-size:18px;
            line-height:1.2;
          }
      #shopify-section-{{ section.id }} .item_promo_code{
            margin-bottom:16px;
          }
      #shopify-section-{{ section.id }} .item_promo_code > div:nth-child(1) svg{
              width:19px;
              height:19px;
            }
      #shopify-section-{{ section.id }} .item_promo_code > div:nth-child(1) p{
          font-size:18px;
            line-height:21.6px;
          }
      #shopify-section-{{ section.id }} .item_promo_code > div:nth-child(2){
            height:43px;
            width:42px;
            flex: 0 0 42px;
          }
      #shopify-section-{{ section.id }} .item_bottom{
            font-size:14px;
          }
    }

    @media only screen and (max-width: 430px) {
      #shopify-section-{{ section.id }} .kik_early_access h1 {
                width: 78%;
                margin: auto;
            }
      #shopify-section-{{ section.id }} .kik_early_access .kik_banner_timer #countdown ul li span:first-child {
              width: 60px;
              height: 56px;
            }
     }
</style>
<div class="kik_early_access kik_white_text">
  <div class="t4s-container container">
    <h1>{{ section.settings.heading }}</h1>
    <p>{{ section.settings.subtitle }}</p>
    {% if section.settings.date_time != blank %}
      <div class="kik_banner_timer">
        <div id="countdown">
          <ul>
            <li><span class="days"></span><span>Days</span></li>
            <li>:</li>
            <li><span class="hours"></span><span>Hrs</span></li>
            <li>:</li>
            <li><span class="minutes"></span><span>Min</span></li>
            <li>:</li>
            <li><span class="seconds"></span><span>Sec</span></li>
          </ul>
        </div>
        <div id="content" class="emoji"></div>
      </div>
    {% endif %}
    <div class="early_access_blocks">
      {% for block in section.blocks %}
        <div class="early_access_item">
          <div class="item_left_image">
            <img src="{{ block.settings.image | img_url:"master" }}">
          </div>
          <div class="item_right_text">
            <div class="item_discounted">
              <p>{{ block.settings.off_label }}</p>
              <span>off</span>
            </div>
            <div class="item_promo_code">
              <div>
                {% render 'perc_label_icon' %}
                <p>Code: {{ block.settings.code }}</p>
              </div>
              <div class="promo_icon">
                <input type="text" value="{{ block.settings.code }}" id="myInput">
                {% render 'copy_icon' %}
              </div>
            </div>
            <p class="item_bottom">{{ block.settings.content }}</p>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</div>
{% if section.settings.date_time != blank %}
  <script>
        (function () {
    const second_{{section.id | replace : "-","_"}} = 1000,
          minute_{{section.id | replace : "-","_"}} = second_{{section.id | replace : "-","_"}} * 60,
          hour_{{section.id | replace : "-","_"}} = minute_{{section.id | replace : "-","_"}} * 60,
          day_{{section.id | replace : "-","_"}} = hour_{{section.id | replace : "-","_"}} * 24;

    let today_{{section.id | replace : "-","_"}} = new Date(),
        dd_{{section.id | replace : "-","_"}} = String(today_{{section.id | replace : "-","_"}}.getDate()).padStart(2, "0"),
        mm_{{section.id | replace : "-","_"}} = String(today_{{section.id | replace : "-","_"}}.getMonth() + 1).padStart(2, "0"),
        yyyy_{{section.id | replace : "-","_"}} = today_{{section.id | replace : "-","_"}}.getFullYear(),
        birthday_{{section.id | replace : "-","_"}} = "{{section.settings.date_time}}"

    today_{{section.id | replace : "-","_"}} = mm_{{section.id | replace : "-","_"}} + "/" + dd_{{section.id | replace : "-","_"}} + "/" + yyyy_{{section.id | replace : "-","_"}};
    if (today_{{section.id | replace : "-","_"}} > birthday_{{section.id | replace : "-","_"}}) {
      birthday_{{section.id | replace : "-","_"}} = dayMonth_{{section.id | replace : "-","_"}} + nextYear_{{section.id | replace : "-","_"}};
    }
    //end

    const countDown_{{section.id | replace : "-","_"}} = new Date(birthday_{{section.id | replace : "-","_"}}).getTime(),
        x_{{section.id | replace : "-","_"}} = setInterval(function() {

          const now_{{section.id | replace : "-","_"}} = new Date().getTime(),
                distance_{{section.id | replace : "-","_"}} = countDown_{{section.id | replace : "-","_"}} - now_{{section.id | replace : "-","_"}};

          document.querySelectorAll("#shopify-section-{{ section.id }} .days").forEach(function(item){
            item.innerText = Math.floor(distance_{{section.id | replace : "-","_"}} / (day_{{section.id | replace : "-","_"}}))
          })
           document.querySelectorAll("#shopify-section-{{ section.id }} .hours").forEach(function(item){
           item.innerText = Math.floor((distance_{{section.id | replace : "-","_"}} % (day_{{section.id | replace : "-","_"}})) / (hour_{{section.id | replace : "-","_"}}))
          })
                document.querySelectorAll("#shopify-section-{{ section.id }} .minutes").forEach(function(item){
           item.innerText = Math.floor((distance_{{section.id | replace : "-","_"}} % (hour_{{section.id | replace : "-","_"}})) / (minute_{{section.id | replace : "-","_"}}))
          })
           document.querySelectorAll("#shopify-section-{{ section.id }} .seconds").forEach(function(item){
           item.innerText = Math.floor((distance_{{section.id | replace : "-","_"}} % (minute_{{section.id | replace : "-","_"}})) / second_{{section.id | replace : "-","_"}})
          })

          //do something later when date is reached
          if (distance_{{section.id | replace : "-","_"}} < 0) {
            clearInterval(x_{{section.id | replace : "-","_"}});
          }
        }, 0)
    }());
  </script>
{% endif %}
{% schema %}
{
  "name": "kik early access",
  "class": "kik-early-access",
  "tag": "section",
  "settings": [
    {
      "type": "color",
      "id": "bk",
      "label": "background"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "background image"
    },
    {
      "type": "image_picker",
      "id": "mobile_image",
      "label": "mobile background image"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "heading"
    },
    {
      "type": "text",
      "id": "subtitle",
      "label": "subtitle"
    },
    {
      "type": "text",
      "id": "date_time",
      "label": "end date and time",
      "default": "12/30/2024 10:25:50",
      "info": "end date and time"
    },
    {
      "type": "color",
      "id": "cl-text",
      "label": "Text Color",
      "default": "#ffffff"
    }
  ],
  "blocks": [
    {
      "type": "block",
      "name": "block",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "image"
        },
        {
          "type": "text",
          "id": "off_label",
          "label": "off label"
        },
        {
          "type": "text",
          "id": "code",
          "label": "promo code"
        },
        {
          "type": "textarea",
          "id": "content",
          "label": "content"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "kik early access"
    }
  ]
}
{% endschema %}
