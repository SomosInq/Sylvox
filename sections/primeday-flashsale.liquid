<!-- FLASH SALE COUNTDOWN SECTION -->

<style>
  .section_width_standard,
  .section_width_full {
    transition: all 0.3s ease;
  }
  .section_width_full {
    width: 100%;
  }
  .section_width_standard {
    margin: 0 auto !important;
    width: 90% !important;
  }

  .section_content_width_standard,
  .section_content_width_full {
    transition: all 0.3s ease;
  }
  .section_content_width_full {
    width: 100%;
  }
  .section_content_width_standard {
    margin: 0 auto !important;
    width: 90% !important;
  }

  .hide-desktop { display: none !important; }
  @media (max-width: 1024px) {
    .hide-tablet { display: none !important; }
    .hide-desktop { display: block !important; }
  }
  @media (max-width: 768px) {
    .hide-mobile { display: none !important; }
  }

  .countdown__display {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-top: 2rem;
  }
  .countdown__display-block {
    display: flex;
    flex-direction: column;
    align-items: center;
    background-color: #b3e2cc;
    padding: 1rem;
    border-radius: 8px;
    min-width: 60px;
  }
  .countdown__display-block h2 {
    font-size: 24px;
    margin: 0;
  }
  .countdown__display-block span {
    font-size: 12px;
    margin-top: 0.25rem;
  }
</style>

<div class="section_width_{{ section.settings.section_width }} section-content {{ section.settings.custom_class }} {% if section.settings.hide_desktop %}hide-desktop{% endif %} {% if section.settings.hide_tablet %}hide-tablet{% endif %} {% if section.settings.hide_mobile %}hide-mobile{% endif %}" id="{{ section.settings.custom_id }}" style="background-color: {{ section.settings.background_color }}; {% if section.settings.background_image != blank %}background-image: url({{ section.settings.background_image | img_url: 'master' }}); background-size: cover; background-position: center;{% endif %} height: {{ section.settings.section_height }}px; padding: {{ section.settings.padding_top }}px {{ section.settings.padding_right }}px {{ section.settings.padding_bottom }}px {{ section.settings.padding_left }}px; display: flex; flex-direction: column; justify-content: center;">
  <div class="section_content_width_{{ section.settings.section_content_width }}" style="text-align: center;">
    {% for block in section.blocks %}
      {% case block.type %}
        {% when 'heading' %}
          <{{ block.settings.heading_tag }} style="color: {{ block.settings.color }}; font-weight: {{ block.settings.font_weight }}; font-style: {% if block.settings.italic %}italic{% else %}normal{% endif %}; text-align: {{ block.settings.alignment }};">
            {{ block.settings.text }}
          </{{ block.settings.heading_tag }}>

        {% when 'richtext' %}
          <div class="{{ block.settings.custom_class }}" style="color: {{ block.settings.color }}; text-align: {{ block.settings.alignment }};">
            {{ block.settings.content }}
          </div>

        {% when 'image' %}
          {% if block.settings.image != blank %}
            <div style="text-align: center;">
              <img src="{{ block.settings.image | image_url }}" alt="{{ block.settings.image.alt | escape }}" style="width: {{ block.settings.image_width }}%; object-fit: contain;">
            </div>
          {% endif %}

        {% when 'timer' %}
          <div class="countdown__display">
            <div class="countdown__display-block">
              <h2 id="days">00</h2><span>Days</span>
            </div>
            <div class="countdown__display-block">
              <h2 id="hours">00</h2><span>Hrs</span>
            </div>
            <div class="countdown__display-block">
              <h2 id="minutes">00</h2><span>Mins</span>
            </div>
            <div class="countdown__display-block">
              <h2 id="seconds">00</h2><span>Secs</span>
            </div>
          </div>
          <p style="margin-top: 1rem; color: #666; font-size: 14px;">{{ block.settings.description }}</p>
          <script>
            document.addEventListener("DOMContentLoaded", function () {
              const countdown = () => {
                const endDate = new Date("{{ block.settings.year }}-{{ block.settings.month }}-{{ block.settings.day }}T{{ block.settings.hour }}:{{ block.settings.minute }}:00");
                const now = new Date();
                const timeLeft = endDate - now;
                if (timeLeft < 0) return;
                const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
                const hours = Math.floor((timeLeft / (1000 * 60 * 60)) % 24);
                const minutes = Math.floor((timeLeft / 1000 / 60) % 60);
                const seconds = Math.floor((timeLeft / 1000) % 60);
                document.getElementById("days").innerText = String(days).padStart(2, "0");
                document.getElementById("hours").innerText = String(hours).padStart(2, "0");
                document.getElementById("minutes").innerText = String(minutes).padStart(2, "0");
                document.getElementById("seconds").innerText = String(seconds).padStart(2, "0");
              };
              setInterval(countdown, 1000);
              countdown();
            });
          </script>
      {% endcase %}
    {% endfor %}
  </div>
</div>

{% schema %}
{
  "name": "Flash Sale",
  "settings": [
    { "type": "select", "id": "section_width", "label": "Section Width", "default": "standard", "options": [ { "value": "standard", "label": "90% Width" }, { "value": "full", "label": "Full Width" } ] },
    { "type": "select", "id": "section_content_width", "label": "Content Width", "default": "standard", "options": [ { "value": "standard", "label": "90% Width" }, { "value": "full", "label": "Full Width" } ] },
    { "type": "color", "id": "background_color", "label": "Background Color", "default": "#ffffff" },
    { "type": "image_picker", "id": "background_image", "label": "Background Image" },
    { "type": "range", "id": "section_height", "label": "Section Height (px)", "min": 100, "max": 1200, "step": 20, "default": 500 },
    { "type": "range", "id": "padding_top", "label": "Padding Top", "min": 0, "max": 100, "step": 5, "default": 0 },
    { "type": "range", "id": "padding_bottom", "label": "Padding Bottom", "min": 0, "max": 100, "step": 5, "default": 0 },
    { "type": "range", "id": "padding_left", "label": "Padding Left", "min": 0, "max": 100, "step": 5, "default": 0 },
    { "type": "range", "id": "padding_right", "label": "Padding Right", "min": 0, "max": 100, "step": 5, "default": 0 },
    { "type": "checkbox", "id": "hide_desktop", "label": "Hide on Desktop", "default": false },
    { "type": "checkbox", "id": "hide_tablet", "label": "Hide on Tablet", "default": false },
    { "type": "checkbox", "id": "hide_mobile", "label": "Hide on Mobile", "default": false },
    { "type": "text", "id": "custom_class", "label": "Custom CSS Class" },
    { "type": "text", "id": "custom_id", "label": "Unique ID" }
  ],
  "blocks": [
    { "type": "heading", "name": "Heading", "settings": [ { "type": "text", "id": "text", "label": "Text" }, { "type": "select", "id": "heading_tag", "label": "Tag", "default": "h2", "options": [ { "value": "h1", "label": "H1" }, { "value": "h2", "label": "H2" }, { "value": "h3", "label": "H3" }, { "value": "h4", "label": "H4" }, { "value": "h5", "label": "H5" }, { "value": "h6", "label": "H6" } ] }, { "type": "color", "id": "color", "label": "Color", "default": "#000000" }, { "type": "checkbox", "id": "italic", "label": "Italic", "default": false }, { "type": "select", "id": "font_weight", "label": "Font Weight", "default": "400", "options": [ { "value": "300", "label": "Light" }, { "value": "400", "label": "Normal" }, { "value": "700", "label": "Bold" } ] }, { "type": "select", "id": "alignment", "label": "Alignment", "default": "center", "options": [ { "value": "left", "label": "Left" }, { "value": "center", "label": "Center" }, { "value": "right", "label": "Right" } ] } ] },
    { "type": "richtext", "name": "Rich Text", "settings": [ { "type": "richtext", "id": "content", "label": "Content" }, { "type": "color", "id": "color", "label": "Text Color", "default": "#000000" }, { "type": "select", "id": "alignment", "label": "Text Alignment", "default": "center", "options": [ { "value": "left", "label": "Left" }, { "value": "center", "label": "Center" }, { "value": "right", "label": "Right" } ] }, { "type": "text", "id": "custom_class", "label": "Custom Class" } ] },
    { "type": "image", "name": "Image", "settings": [ { "type": "image_picker", "id": "image", "label": "Image" }, { "type": "range", "id": "image_width", "label": "Width (%)", "min": 10, "max": 100, "step": 5, "default": 100 } ] },
    { "type": "timer", "name": "Countdown Timer", "settings": [ { "type": "select", "id": "year", "label": "Year", "default": "2025", "options": [ { "value": "2024", "label": "2024" }, { "value": "2025", "label": "2025" }, { "value": "2026", "label": "2026" } ] }, { "type": "select", "id": "month", "label": "Month", "default": "06", "options": [ { "value": "01", "label": "January" }, { "value": "02", "label": "February" }, { "value": "03", "label": "March" }, { "value": "04", "label": "April" }, { "value": "05", "label": "May" }, { "value": "06", "label": "June" }, { "value": "07", "label": "July" }, { "value": "08", "label": "August" }, { "value": "09", "label": "September" }, { "value": "10", "label": "October" }, { "value": "11", "label": "November" }, { "value": "12", "label": "December" } ] }, { "type": "select", "id": "day", "label": "Day", "default": "30", "options": [ { "value": "01", "label": "1" }, { "value": "02", "label": "2" }, { "value": "03", "label": "3" }, { "value": "04", "label": "4" }, { "value": "05", "label": "5" }, { "value": "06", "label": "6" }, { "value": "07", "label": "7" }, { "value": "08", "label": "8" }, { "value": "09", "label": "9" }, { "value": "10", "label": "10" }, { "value": "11", "label": "11" }, { "value": "12", "label": "12" }, { "value": "13", "label": "13" }, { "value": "14", "label": "14" }, { "value": "15", "label": "15" }, { "value": "16", "label": "16" }, { "value": "17", "label": "17" }, { "value": "18", "label": "18" }, { "value": "19", "label": "19" }, { "value": "20", "label": "20" }, { "value": "21", "label": "21" }, { "value": "22", "label": "22" }, { "value": "23", "label": "23" }, { "value": "24", "label": "24" }, { "value": "25", "label": "25" }, { "value": "26", "label": "26" }, { "value": "27", "label": "27" }, { "value": "28", "label": "28" }, { "value": "29", "label": "29" }, { "value": "30", "label": "30" }, { "value": "31", "label": "31" } ] }, { "type": "select", "id": "hour", "label": "Hour", "default": "23", "options": [ { "value": "00", "label": "00" }, { "value": "12", "label": "12" }, { "value": "23", "label": "23" } ] }, { "type": "select", "id": "minute", "label": "Minute", "default": "59", "options": [ { "value": "00", "label": "00" }, { "value": "15", "label": "15" }, { "value": "30", "label": "30" }, { "value": "45", "label": "45" }, { "value": "59", "label": "59" } ] }, { "type": "text", "id": "description", "label": "Message Below Timer", "default": "Don't miss it, Up to $960 Off" } ] }
  ],
  "presets": [ { "name": "Flash Sale", "category": "Somos Custom" } ]
}
{% endschema %}
