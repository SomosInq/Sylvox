{% comment %}
  Custom section: Sidebar Collection Filter | filter-collection-with-sidebar.liquid
{% endcomment %}

<div class="filter-collection section_width_{{ section.settings.section_width }}" id="{{ section.id }}" 
  style="
    background-color: {{ section.settings.background_color }};
    {% if section.settings.background_image %}background-image: url({{ section.settings.background_image | image_url: width: 2000 }}); background-size: cover; background-position: center;{% endif %}
    padding: {{ section.settings.padding_top }}px !important; {{ section.settings.padding_right }}px !important; {{ section.settings.padding_bottom }}px !important; {{ section.settings.padding_left }}px !important;
    margin-top: {{ section.settings.margin_top }}px !important; margin-bottom: {{ section.settings.margin_bottom }}px !important;
  ">
  <div class="filter-collection__wrapper">
    <div class="filter-collection__overlay" onclick="document.querySelector('.filter-collection__drawer').classList.remove('is-open');document.querySelector('.filter-collection__overlay').classList.remove('is-active')"></div>
    <div class="filter-collection__drawer">
      <div class="filter-collection__drawer-inner">
        <aside class="filter-collection__sidebar">
          <details>
            <summary class="filter-collection__group-heading-wrapper filter-collection__series-toggle">
              <span class="filter-collection__group-heading">Sort By</span>
  {% if section.settings.chevron_icon != blank %}
    <img src="{{ section.settings.chevron_icon | image_url: width: 16 }}" class="filter-collection__chevron-img" alt="Chevron" />
  {% else %}
    <span class="filter-collection__chevron-text">⌄</span>
  {% endif %}
            </summary>
            <ul class="filter-collection__series-list">
              <li class="filter-collection__series-item">Featured</li>
              <li class="filter-collection__series-item">Price: Low to High</li>
              <li class="filter-collection__series-item">Price: High to Low</li>
            </ul>
          </details>
          <div class="filter-collection__divider"></div>

          <details>
            <summary class="filter-collection__group-heading-wrapper filter-collection__series-toggle">
  <span class="filter-collection__group-heading">Series</span>
  {% if section.settings.chevron_icon != blank %}
    <img src="{{ section.settings.chevron_icon | image_url: width: 16 }}" class="filter-collection__chevron-img" alt="Chevron" />
  {% else %}
    <span class="filter-collection__chevron-text">⌄</span>
  {% endif %}
</summary>
            <ul class="filter-collection__series-list">
              <li class="filter-collection__series-item active">
                {% if section.settings.image_all != blank %}
                  <img src="{{ section.settings.image_all | image_url: width: 22 }}" width="30" height="30" alt="All" />
                {% endif %}
                <span>ALL</span>
              </li>
              <li class="filter-collection__series-item">
                {% if section.settings.image_Full_Sun != blank %}
                  <img src="{{ section.settings.image_Full_Sun | image_url: width: 77 }}" width="30" height="30"" alt="Full_Sun" />
                {% endif %}
                <span>Full Sun</span>
              </li>
              <li class="filter-collection__series-item">
                {% if section.settings.image_Partial_Sun != blank %}
                  <img src="{{ section.settings.image_Partial_Sun | image_url: width: 30 }}" width="30" height="30" alt="Partial_Sun" />
                {% endif %}
                <span>Partial Sun</span>
              </li>
              <li class="filter-collection__series-item active">
                {% if section.settings.image_Lift_Cabinet != blank %}
                  <img src="{{ section.settings.image_Lift_Cabinet | image_url: width: 30 }}" width="30" height="30" alt="Lift_Cabinet" />
                {% endif %}
                <span>Lift Cabinet</span>
              </li>
            </ul>
          </details>

          <div class="filter-collection__divider"></div>

<details>
  <summary class="filter-collection__group-heading-wrapper filter-collection__series-toggle">
    <span class="filter-collection__group-heading">Size</span>
    {% if section.settings.chevron_icon != blank %}
      <img src="{{ section.settings.chevron_icon | image_url: width: 16 }}" class="filter-collection__chevron-img" alt="Chevron" />
    {% else %}
      <span class="filter-collection__chevron-text">⌄</span>
    {% endif %}
  </summary>
  <ul class="filter-collection__series-list">
    <li class="filter-collection__series-item">Small</li>
    <li class="filter-collection__series-item">Medium</li>
    <li class="filter-collection__series-item">Large</li>
  </ul>
</details>

<div class="filter-collection__divider"></div>

<details>
  <summary class="filter-collection__group-heading-wrapper filter-collection__series-toggle">
    <span class="filter-collection__group-heading">Accessories</span>
    {% if section.settings.chevron_icon != blank %}
      <img src="{{ section.settings.chevron_icon | image_url: width: 16 }}" class="filter-collection__chevron-img" alt="Chevron" />
    {% else %}
      <span class="filter-collection__chevron-text">⌄</span>
    {% endif %}
  </summary>
  <ul class="filter-collection__series-list">
    <li class="filter-collection__series-item">Remote</li>
    <li class="filter-collection__series-item">Wall Mount</li>
    <li class="filter-collection__series-item">Covers</li>
  </ul>
</details>


          <div class="filter-collection__compare-wrapper">
            <div class="filter-collection__compare-button">
<a href="{{ section.settings.compare_button_link | default: '#' }}" class="filter-collection__button" style="background-color: {{ section.settings.compare_button_bg_color }};">
  <span class="compare-button__content">
    {% if section.settings.compare_button_icon %}
      <img src="{{ section.settings.compare_button_icon | image_url: width: 16 }}" alt="Icon" class="compare-button__icon" />
    {% endif %}
    <span>Compare</span>
  </span>
</a>



            </div>
          </div>
          <div class="filter-collection__apply-wrapper">
            <button class="filter-collection__apply-button">APPLY FILTERS</button>
          </div>
        </aside>
      </div>
    </div>
    <button class="filter-collection__filter-toggle btn btn--secondary" onclick="document.querySelector('.filter-collection__drawer').classList.toggle('is-open');document.querySelector('.filter-collection__overlay').classList.toggle('is-active')">
      Filter
    </button>

    <div class="filter-collection__products">
    <div class="filter-collection__grid" style="grid-template-columns: repeat({{ section.settings.products_per_row }}, 1fr);">
        {% for product in collection.products %}
          <div class="filter-collection__item">
            <div class="filter-collection__image-wrapper">
              <a href="{{ product.url }}">
                {{ product.featured_image | image_url: width: 500 | image_tag: class: 'filter-collection__image', loading: 'lazy' }}
              </a>
            </div>
            <div class="filter-collection__meta">
              <span class="filter-collection__tag">Lift Cabinet</span>
              <h3 class="filter-collection__title">{{ product.title }}</h3>
              <p class="filter-collection__price">
                From {{ product.price | money }}
                {% if product.compare_at_price > product.price %}
                  <span class="filter-collection__compare-price">{{ product.compare_at_price | money }}</span>
                {% endif %}
              </p>
            </div>
          </div>
        {% endfor %}
      </div>
      {% paginate collection.products by 12 %}
        <div class="filter-collection__pagination">
          {{ paginate | default_pagination }}
        </div>
      {% endpaginate %}
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function () {
  const toggles = document.querySelectorAll('.filter-collection__series-toggle');

  toggles.forEach(summary => {
    const details = summary.closest('details');
    summary.addEventListener('click', () => {
      setTimeout(() => {
        const chevronImg = summary.querySelector('.filter-collection__chevron-img');
        const chevronText = summary.querySelector('.filter-collection__chevron-text');
        const isOpen = details.hasAttribute('open');

        if (chevronImg) {
          chevronImg.style.transform = isOpen ? 'rotate(180deg)' : 'rotate(0deg)';
        }
        if (chevronText) {
          chevronText.style.transform = isOpen ? 'rotate(180deg)' : 'rotate(0deg)';
        }
      }, 0);
    });
  });
});

</script>

{% style %}
@import url('https://fonts.googleapis.com/css2?family=Questrial&family=Roboto&display=swap');

{{ 'filter-collection-with-sidebar.css' | asset_url | stylesheet_tag }}

.filter-collection__chevron-img,
.filter-collection__chevron-text {
  transition: transform 0.6s ease;
}

details[open] .filter-collection__chevron-img,
details[open] .filter-collection__chevron-text {
  transform: rotate(180deg);
}

.compare-button__content {
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

.compare-button__icon {
  width: 16px;
  height: 16px;
  object-fit: contain;
  margin-right: 8px;
  vertical-align: middle;
}


.filter-collection__chevron {
  width: 13px;
  height: 8px;
  object-fit: contain;
  transition: transform 0.3s ease;
  display: inline-block;
}

.filter-collection__pagination span.prev,
.filter-collection__pagination span.next,  {
    width: 19px !important;
    height: 19px !important;
}

.filter-collection__pagination .prev a,
.filter-collection__pagination .next a {
  position: relative;
  color: transparent; 
  font-size: 0;
  justify-content: center;
  text-align: center;
  display: flex
;
}

/* Insert SVG before/after */
.filter-collection__pagination .prev a::before,
.filter-collection__pagination .next a::before {
  content: '';
  display: inline-block;
  width: 19px;
  height: 19px;
  background-repeat: no-repeat;
  background-position: center;
  background-size: contain;
}

/* Left arrow for “Previous” */
.filter-collection__pagination .prev a::before {
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="19" height="19" viewBox="0 0 19 19" fill="none"><path d="M7.05371 15.77L12.2154 10.6083C12.825 9.99873 12.825 9.00123 12.2154 8.39165L7.05371 3.22998" stroke="%231F1F1F" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/></svg>');
  transform: rotate(180deg);
}

/* Right arrow for “Next” */
.filter-collection__pagination .next a::before {
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="19" height="19" viewBox="0 0 19 19" fill="none"><path d="M7.05371 15.77L12.2154 10.6083C12.825 9.99873 12.825 9.00123 12.2154 8.39165L7.05371 3.22998" stroke="%231F1F1F" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/></svg>');
}
/* ------ */
/* Overlay styles for filter drawer */
.filter-collection__overlay {
  display: none;
}
.filter-collection__overlay.is-active {
  display: block;
}
.filter-collection {
  display: flex;
  justify-content: center;
  padding: 40px 20px;
}
.filter-collection__wrapper {
  display: flex;
  width: 100%;
  max-width: 1608px;
  margin-inline: auto;
  justify-content: center;
}
.filter-collection__drawer {
  display: flex;
  flex-direction: column;
  gap: 22px;
  background-color: #ffffff;
  width: 312px;
  padding: 0;
  align-items: flex-start;
  justify-content: flex-start;
}
.filter-collection__drawer-inner {
  display: flex;
  flex-direction: column;
  gap: 22px;
  width: 100%;
}
.filter-collection__sidebar {
  flex-shrink: 0;
  width: 312px;
  display: flex;
  flex-direction: column;
  gap: 22px;
  padding-right: 40px;
}
.filter-collection__group-heading-wrapper {
  display: flex;
  justify-content: space-between;
  align-items: center;
      margin-bottom: 30px;
}
.filter-collection__group-heading {
  font-family: 'Questrial', sans-serif;
  font-size: 18px;
  color: #2C2C2C;
}
.filter-collection__chevron {
  width: 13px;
  height: 8px;
  object-fit: contain;
}
.filter-collection__products {
  flex: 1;
  max-width: 1608px;
}
.filter-collection__filter-group {
  display: flex;
  flex-direction: column;
}
.filter-collection__label {
  font-family: 'Questrial', sans-serif;
  font-size: 18px;
  font-weight: 400;
  color: #2C2C2C;
  margin-bottom: 10px;
}
.filter-collection__select {
  font-size: 14px;
  padding: 10px;
  border: 1px solid #c2c4c5;
  background: #ffffff;
  color: #0a0a0a;
}
.filter-collection__series-list {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 20px;
}
.filter-collection__series-item {
  font-family: 'Basic Sans', sans-serif;
  font-size: 16px;
  font-weight: 400;
  line-height: 20px;
  padding: 14px;
  border-radius: 5px;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: 22px;
  color: #2e2e2e;
  width: 100%;
  background: white;
}
.filter-collection__series-item:hover {
  background: #fbfbfb;
}
.filter-collection__series-item.active {
  font-weight: 400;
  background: #fbfbfb;
}
.filter-collection__compare-wrapper {
  padding: 0 0 24px 0;
}
.filter-collection__compare-button {
  margin-top: auto;
}
.filter-collection__button {
  padding: 12px 24px;
  background: #101820;
  color: #ffffff;
  border: none;
  font-family: 'Roboto', sans-serif;
  font-size: 14px;
  font-weight: 400;
  cursor: pointer;
  border-radius: 40px;
}
.filter-collection__grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  column-gap: 25px;
}
.filter-collection__item {
  width: 100%;
  height: 472px;
  border-radius: 6px;
  background: #ffffff;
  position: relative;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
}
.filter-collection__image-wrapper {
  width: 100%;
  max-height: 322px;
  aspect-ratio: 283 / 322;
  background-size: cover;
  background-position: top;
  background-repeat: no-repeat;
}
.filter-collection__image {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
}
.filter-collection__meta {
  padding: 16px 13px 0;
  display: flex;
  flex-direction: column;
  gap: 12px;
}
.filter-collection__tag {
  background: linear-gradient(90deg, #57a653, #1ba613);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  font-family: Roboto, sans-serif;
  font-size: 14px;
  font-weight: 400;
  line-height: normal;
}
.filter-collection__title {
  font-family: Questrial;
  font-size: 24px;
  font-weight: 400;
  color: rgba(0, 0, 0, 0.85);
  line-height: normal;
  margin: 0;
}
.filter-collection__price {
  font-family: Roboto;
  font-size: 16px;
  font-weight: 400;
  color: rgba(0, 0, 0, 0.85);
  line-height: normal;
  margin: 0;
}
.filter-collection__compare-price {
  text-decoration: line-through;
  color: rgba(0, 0, 0, 0.5);
  margin-left: 4px;
  font-size: 16px;
  font-family: Roboto;
}
.filter-collection__pagination {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 30px;
  font-size: 16px;
  font-family: 'Basic Sans', sans-serif;
  font-weight: 400;
  text-transform: capitalize;
  color: black;
  margin-top: 48px;
}

.filter-collection__pagination a {
  text-decoration: none;
  color: black;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  text-transform: inherit;
}
.filter-collection__divider {
  width: 100%;
  height: 1px;
  background: rgba(0, 0, 0, 0.08);
}
.filter-collection__filter-toggle {
  display: none;
}
@media screen and (max-width: 767px) {
  .filter-collection__overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.4);
    z-index: 9998;
    transition: opacity 0.3s ease-in-out;
  }

  .filter-collection__drawer.is-open ~ .filter-collection__overlay {
    display: block;
  }
  .filter-collection__wrapper {
    flex-direction: column;
    align-items: center;
    gap: 20px;
  }

  .filter-collection__grid {
    grid-template-columns: repeat(2, 164px)!important;
    column-gap: 16px;
    row-gap: 16px;
    padding: 0 23px;
    justify-content: flex-start;
    align-items: flex-start;
  }

  .filter-collection__item {
    width: 164px;
    height: auto;
    padding-top: 5px;
    padding-bottom: 5px;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: flex-start;
    gap: 5px;
  }

  .filter-collection__image-wrapper {
    width: 164px;
    height: 181px;
  }

  .filter-collection__meta {
    width: 100%;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: flex-start;
    gap: 12px;
    padding: 0;
  }

  .filter-collection__tag {
    font-size: 14px;
    font-family: Roboto;
    font-weight: 400;
    color: #57A653;
  }

  .filter-collection__title {
    font-size: 15px;
    font-family: Questrial;
    font-weight: 600;
    color: rgba(0, 0, 0, 0.85);
  }

  .filter-collection__price {
    font-size: 14px;
    font-family: Roboto;
    font-weight: 400;
    color: rgba(0, 0, 0, 0.85);
  }

  .filter-collection__pagination {
    justify-content: center;
    align-items: center;
    gap: 24px;
    font-size: 16px;
    font-family: 'Basic Sans', sans-serif;
    font-weight: 400;
    text-transform: capitalize;
    color: black;
  }

  .filter-collection__drawer {
    position: fixed;
    top: 0;
    left: 0;
    height: 100%;
    width: 312px;
    max-width: 90%;
    background: white;
    box-shadow: 2px 0 6px rgba(0,0,0,0.1);
    transform: translateX(-100%);
    transition: transform 0.3s ease-in-out, opacity 0.3s, visibility 0.3s;
    z-index: 9999;
    flex-direction: column;
    padding: 40px 24px;
    gap: 22px;
    visibility: hidden;
    opacity: 0;
    pointer-events: none;
  }
  .filter-collection__drawer.is-open {
    transform: translateX(0%);
    visibility: visible;
    opacity: 1;
    pointer-events: auto;
  }
  .filter-collection__sidebar {
    display: flex;
    flex-direction: column;
    gap: 22px;
    padding-right: 0;
    width: 100%;
  }

  .filter-collection__group-heading,
  .filter-collection__group-heading-wrapper .filter-collection__group-heading,
  .filter-collection__group-heading-wrapper p.filter-collection__group-heading {
    font-family: 'Questrial', sans-serif;
    font-size: 14px;
    font-weight: 400;
    color: #2C2C2C;
  }
  /* If you have other labels like Sort By, Series, Accessories as .filter-collection__group-heading, they're covered above */

  .filter-collection__series-item {
    font-family: 'Questrial', sans-serif;
    font-size: 14px;
    font-weight: 400;
    color: #2C3939;
  }

  .filter-collection__compare-button .filter-collection__button {
    background: #101820;
    border-radius: 40px;
    padding: 12px 24px;
    color: #fff;
    font-size: 14px;
    font-family: Roboto, sans-serif;
  }

  .filter-collection__apply-button {
    padding: 12px 24px;
    border: 1px solid #000;
    border-radius: 40px;
    color: #1D1D1B;
    font-size: 14px;
    font-family: Roboto, sans-serif;
    font-weight: 400;
    background: transparent;
    width: 100%;
    margin-top: 16px;
    text-align: center;
  }
  .filter-collection__filter-toggle {
    display: flex;
  }
}
{% endstyle %}

{% schema %}
{
  "name": "Sidebar Collection Filter",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "select",
      "id": "section_width",
      "label": "Section Width",
      "default": "standard",
      "options": [
        { "value": "standard", "label": "50% Width" },
        { "value": "full", "label": "Full Width" }
      ]
    },
    { "type": "range", "id": "margin_top", "label": "Margin Top", "min": 0, "max": 200, "step": 4, "default": 0 },
    { "type": "range", "id": "margin_bottom", "label": "Margin Bottom", "min": 0, "max": 200, "step": 4, "default": 0 },
    { "type": "range", "id": "padding_top", "label": "Padding Top", "min": 0, "max": 200, "step": 4, "default": 0 },
    { "type": "range", "id": "padding_bottom", "label": "Padding Bottom", "min": 0, "max": 200, "step": 4, "default": 0 },
    { "type": "range", "id": "padding_left", "label": "Padding Left", "min": 0, "max": 200, "step": 4, "default": 0 },
    { "type": "range", "id": "padding_right", "label": "Padding Right", "min": 0, "max": 200, "step": 4, "default": 0 },

    { "type": "range", "id": "products_per_row", "label": "Products Per Row", "min": 1, "max": 6, "step": 1, "default": 4 },
    {
      "type": "image_picker",
      "id": "image_all",
      "label": "ALL Image"
    },
    {
      "type": "image_picker",
      "id": "image_Full_Sun",
      "label": "Full Sun Image"
    },
    {
      "type": "image_picker",
      "id": "image_Partial_Sun",
      "label": "Partial Sun Image"
    },
    {
      "type": "image_picker",
      "id": "image_Lift_Cabinet",
      "label": "Lift Cabinet Image"
    },
    {
  "type": "image_picker",
  "id": "chevron_icon",
  "label": "Chevron Icon"
},
{
  "type": "color",
  "id": "compare_button_bg_color",
  "label": "Compare Button Background",
  "default": "#101820"
},
{
  "type": "image_picker",
  "id": "compare_button_icon",
  "label": "Compare Button Icon"
},
{
  "type": "url",
  "id": "compare_button_link",
  "label": "Compare Button Link"
}
  ],
  "presets": [
    {
      "name": "Sidebar Collection Filter",
      "category": "Custom"
    }
  ]
}
{% endschema %}
