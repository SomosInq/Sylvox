{%- render 'section-spacing-collapsing' -%}

{% style %}
    .section_width_standard,
.section_width_full {
  transition: all 0.3s ease;
}
    .section_width_full {
  width: 100%;
}

.section_width_standard {
  margin: 0 auto;
  width: 90%;
}
{% endstyle %}

<div class="comparison-section section_width_{{ section.settings.section_width }}" style="
  {% if section.settings.background_image != blank %}
    background-image: url({{ section.settings.background_image | image_url }});
    background-size: cover;
    background-position: center;
  {% elsif section.settings.background_color != blank %}
    background-color: {{ section.settings.background_color }};
  {% endif %}
  padding-top: {{ section.settings.padding_top }}px;
  padding-bottom: {{ section.settings.padding_bottom }}px;
  padding-left: {{ section.settings.padding_left }}px;
  padding-right: {{ section.settings.padding_right }}px;
">
  <div class="container text-{{ section.settings.text_alignment }} {{ section.settings.section_width }}">
    {% if section.settings.title != blank %}
      <h2 style="color: {{ section.settings.text_color }}; font-size: {{ section.settings.title_size }}px;">
        {{ section.settings.title }}
      </h2>
    {% endif %}
    {% if section.settings.description != blank %}
      <div style="color: {{ section.settings.text_color }}; font-size: {{ section.settings.text_size }}px;">
        {{ section.settings.description }}
      </div>
    {% endif %}
    {% if section.settings.button_text != blank and section.settings.button_url != blank %}
      <a href="{{ section.settings.button_url }}" class="btn" style="
        color: {{ section.settings.button_text_color }};
        background-color: {{ section.settings.button_background }};
        font-size: {{ section.settings.button_size }}px;
      ">
        {{ section.settings.button_text }}
      </a>
    {% endif %}

    <div class="comparison-table" style="display: grid; grid-template-columns: auto repeat({{ section.blocks.size }}, 1fr); gap: 1rem;">
      <!-- Headings row -->
      <div></div>
      {% for block in section.blocks %}
        <div class="text-center">
          {% if block.settings.main_image %}
            <img src="{{ block.settings.main_image | image_url }}" alt="Main image" style="max-width: 100%; display: block; margin: 0 auto;">
          {% endif %}
          <div class="icon-title-wrapper" style="display: flex; align-items: center; justify-content: center; gap: 0.5rem;">
            {% if block.settings.icon %}
              <img src="{{ block.settings.icon | image_url }}" alt="Icon" style="height: 24px;">
            {% endif %}
            <strong>{{ block.settings.title }}</strong>
          </div>
          {% if block.settings.button_label and block.settings.button_link %}
            <a href="{{ block.settings.button_link }}" class="btn mt-2">{{ block.settings.button_label }}</a>
          {% endif %}
        </div>
      {% endfor %}

      <!-- Rows -->
      {% for i in (1..20) %}
        {% assign heading_key = 'heading_' | append: i %}
        {% if section.settings[heading_key] != blank %}
          <div><strong>{{ section.settings[heading_key] }}</strong></div>
          {% for block in section.blocks %}
            {% assign value_key = 'value_' | append: i %}
            {% assign image_key = 'value_image_' | append: i %}
            <div class="text-center">
              {% if block.settings[image_key] %}
                <img src="{{ block.settings[image_key] | image_url }}" alt="Value image" style="max-width: 80%; display: block; margin: 0 auto 0.5rem;" />
              {% endif %}
              {% if block.settings[value_key] != blank %}
                <div>{{ block.settings[value_key] }}</div>
              {% else %}
                <div>â€”</div>
              {% endif %}
            </div>
          {% endfor %}
        {% endif %}
      {% endfor %}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Comparison Table",
  "settings": [
     {
  "type": "select",
  "id": "section_width",
  "label": "Section Width",
  "default": "standard",
  "options": [
    {
      "value": "standard",
      "label": "50% Width"
    },
    {
      "value": "full",
      "label": "Full Width"
    }
  ]
},
    {"type": "text", "id": "title", "label": "Title"},
    {"type": "richtext", "id": "description", "label": "Description"},
    {"type": "text", "id": "button_text", "label": "Button Text"},
    {"type": "url", "id": "button_url", "label": "Button URL"},
    {"type": "select", "id": "text_alignment", "label": "Text Alignment", "options": [
      {"value": "left", "label": "Left"},
      {"value": "center", "label": "Center"},
      {"value": "right", "label": "Right"}
    ], "default": "left"},
    {"type": "color", "id": "text_color", "label": "Text Color"},
    {"type": "color", "id": "button_background", "label": "Button Background Color"},
    {"type": "color", "id": "button_text_color", "label": "Button Text Color"},
    {"type": "range", "id": "title_size", "label": "Title Font Size", "min": 16, "max": 48, "default": 28},
    {"type": "range", "id": "text_size", "label": "Text Font Size", "min": 12, "max": 30, "default": 16},
    {"type": "range", "id": "button_size", "label": "Button Font Size", "min": 10, "max": 30, "default": 16},
    {"type": "image_picker", "id": "background_image", "label": "Background Image"},
    {"type": "color", "id": "background_color", "label": "Background Color"},
    {"type": "range", "id": "padding_top", "label": "Padding Top", "min": 0, "max": 100, "default": 20},
    {"type": "range", "id": "padding_bottom", "label": "Padding Bottom", "min": 0, "max": 100, "default": 20},
    {"type": "range", "id": "padding_left", "label": "Padding Left", "min": 0, "max": 100, "default": 0},
    {"type": "range", "id": "padding_right", "label": "Padding Right", "min": 0, "max": 100, "default": 0},
    {"type": "header", "content": "Row Headings"},
    {"type": "text", "id": "heading_1", "label": "Heading 1"},
    {"type": "text", "id": "heading_2", "label": "Heading 2"},
    {"type": "text", "id": "heading_3", "label": "Heading 3"},
    {"type": "text", "id": "heading_4", "label": "Heading 4"},
    {"type": "text", "id": "heading_5", "label": "Heading 5"},
    {"type": "text", "id": "heading_6", "label": "Heading 6"},
    {"type": "text", "id": "heading_7", "label": "Heading 7"},
    {"type": "text", "id": "heading_8", "label": "Heading 8"},
    {"type": "text", "id": "heading_9", "label": "Heading 9"},
    {"type": "text", "id": "heading_10", "label": "Heading 10"},
    {"type": "text", "id": "heading_11", "label": "Heading 11"},
    {"type": "text", "id": "heading_12", "label": "Heading 12"},
    {"type": "text", "id": "heading_13", "label": "Heading 13"},
    {"type": "text", "id": "heading_14", "label": "Heading 14"},
    {"type": "text", "id": "heading_15", "label": "Heading 15"},
    {"type": "text", "id": "heading_16", "label": "Heading 16"},
    {"type": "text", "id": "heading_17", "label": "Heading 17"},
    {"type": "text", "id": "heading_18", "label": "Heading 18"},
    {"type": "text", "id": "heading_19", "label": "Heading 19"},
    {"type": "text", "id": "heading_20", "label": "Heading 20"}
  ],
  "blocks": [
    {
      "type": "values",
      "name": "Column",
      "settings": [
        {"type": "image_picker", "id": "main_image", "label": "Main Image"},
        {"type": "image_picker", "id": "icon", "label": "Icon beside title"},
        {"type": "text", "id": "title", "label": "Title"},
        {"type": "text", "id": "button_label", "label": "Button Label"},
        {"type": "url", "id": "button_link", "label": "Button URL"},
        {"type": "header", "content": "Row Values"},
        { "type": "richtext", "id": "value_1", "label": "Value 1" },
{ "type": "image_picker", "id": "value_image_1", "label": "Image above Value 1" },
{ "type": "richtext", "id": "value_2", "label": "Value 2" },
{ "type": "image_picker", "id": "value_image_2", "label": "Image above Value 2" },
{ "type": "richtext", "id": "value_3", "label": "Value 3" },
{ "type": "image_picker", "id": "value_image_3", "label": "Image above Value 3" },
{ "type": "richtext", "id": "value_4", "label": "Value 4" },
{ "type": "image_picker", "id": "value_image_4", "label": "Image above Value 4" },
{ "type": "richtext", "id": "value_5", "label": "Value 5" },
{ "type": "image_picker", "id": "value_image_5", "label": "Image above Value 5" },
{ "type": "richtext", "id": "value_6", "label": "Value 6" },
{ "type": "image_picker", "id": "value_image_6", "label": "Image above Value 6" },
{ "type": "richtext", "id": "value_7", "label": "Value 7" },
{ "type": "image_picker", "id": "value_image_7", "label": "Image above Value 7" },
{ "type": "richtext", "id": "value_8", "label": "Value 8" },
{ "type": "image_picker", "id": "value_image_8", "label": "Image above Value 8" },
{ "type": "richtext", "id": "value_9", "label": "Value 9" },
{ "type": "image_picker", "id": "value_image_9", "label": "Image above Value 9" },
{ "type": "richtext", "id": "value_10", "label": "Value 10" },
{ "type": "image_picker", "id": "value_image_10", "label": "Image above Value 10" },
{ "type": "richtext", "id": "value_11", "label": "Value 11" },
{ "type": "image_picker", "id": "value_image_11", "label": "Image above Value 11" },
{ "type": "richtext", "id": "value_12", "label": "Value 12" },
{ "type": "image_picker", "id": "value_image_12", "label": "Image above Value 12" },
{ "type": "richtext", "id": "value_13", "label": "Value 13" },
{ "type": "image_picker", "id": "value_image_13", "label": "Image above Value 13" },
{ "type": "richtext", "id": "value_14", "label": "Value 14" },
{ "type": "image_picker", "id": "value_image_14", "label": "Image above Value 14" },
{ "type": "richtext", "id": "value_15", "label": "Value 15" },
{ "type": "image_picker", "id": "value_image_15", "label": "Image above Value 15" },
{ "type": "richtext", "id": "value_16", "label": "Value 16" },
{ "type": "image_picker", "id": "value_image_16", "label": "Image above Value 16" },
{ "type": "richtext", "id": "value_17", "label": "Value 17" },
{ "type": "image_picker", "id": "value_image_17", "label": "Image above Value 17" },
{ "type": "richtext", "id": "value_18", "label": "Value 18" },
{ "type": "image_picker", "id": "value_image_18", "label": "Image above Value 18" },
{ "type": "richtext", "id": "value_19", "label": "Value 19" },
{ "type": "image_picker", "id": "value_image_19", "label": "Image above Value 19" },
{ "type": "richtext", "id": "value_20", "label": "Value 20" },
{ "type": "image_picker", "id": "value_image_20", "label": "Image above Value 20" }

      ]
    }
  ],
  "presets": [
    { "name": "Comparison Table", "blocks": [] }
  ]
}
{% endschema %}
