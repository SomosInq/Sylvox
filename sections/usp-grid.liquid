<!-- Flickity CSS -->
<link rel="stylesheet" href="https://unpkg.com/flickity@2/dist/flickity.min.css">
<!-- Flickity JS -->
<script src="https://unpkg.com/flickity@2/dist/flickity.pkgd.min.js"></script>

<section class="usp-grid-section">
  {% if section.settings.heading != blank %}
    <h2 class="usp-heading">{{ section.settings.heading }}</h2>
  {% endif %}

  <div 
    class="usp-slider js-flickity" 
    data-flickity='{ 
      "wrapAround": true,
      "pageDots": false,
      "contain": true,
      "prevNextButtons": {{ section.settings.show_arrows }},
      "cellAlign": "left"
    }'>
    
    {% for block in section.blocks %}
      <a href="{{ block.settings.link | default: '#' }}" class="usp-box carousel-cell" {{ block.shopify_attributes }}>
        {% if block.settings.icon %}
          <img src="{{ block.settings.icon | img_url: '60x60' }}" alt="{{ block.settings.title }}">
        {% endif %}
        <h3 class="usp-title">{{ block.settings.title }}</h3>
        <p class="usp-text">{{ block.settings.text }}</p>
      </a>
    {% endfor %}
  </div>
</section>

<style>
.usp-grid-section {
  padding: 2rem;
  text-align: center;
}
.usp-heading {
  font-size: 1.75rem;
  margin-bottom: 1.5rem;
}
.usp-slider {
  display: flex;
  overflow: hidden;
}
.usp-box {
  display: block;
  padding: 1rem;
  margin: 0 0.5rem;
  background: #fff;
  border-radius: 0.5rem;
  box-shadow: 0 0 10px rgba(0,0,0,0.05);
  text-align: center;
  text-decoration: none;
  color: inherit;
}
.usp-title {
  font-weight: 600;
  margin-top: 0.75rem;
}
.usp-text {
  font-size: 0.875rem;
  color: #555;
}
</style>

{% schema %}
{
  "name": "USP Grid",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Section Heading",
      "default": "Sylvoxâ€™s exclusive advantages"
    },
    {
      "type": "checkbox",
      "id": "show_arrows",
      "label": "Show Navigation Arrows",
      "default": true
    }
  ],
  "blocks": [
    {
      "type": "usp_item",
      "name": "USP Item",
      "settings": [
        {
          "type": "image_picker",
          "id": "icon",
          "label": "Icon Image"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Authenticity Guarantee"
        },
        {
          "type": "text",
          "id": "text",
          "label": "Text",
          "default": "100% Genuine, Quality Assured"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Box Link"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "USP Grid",
      "category": "Somos Custom"
    }
  ]
}
{% endschema %}