<style>
  .section_width_standard,
  .section_width_full {
    transition: all 0.3s ease;
  }

  .section_width_full {
    width: 100%;
  }

  .section_width_standard {
    margin: 0 auto !important;
    width: 90% !important;
  }

  .hide-desktop { display: none !important; }
  @media (max-width: 1024px) {
    .hide-tablet { display: none !important; }
    .hide-desktop { display: block !important; }
  }
  @media (max-width: 768px) {
    .hide-mobile { display: none !important; }
  }



   @media screen and (max-width: 768px) {
    .subscribe-form {
    text-align: left;
        display: block;
    height: auto;
    padding: 0 !important;
    /* margin: 10px 0 0 0; */
    align-items: center;
    flex-shrink: 0;
    border-radius: 0 !important;
    background: transparent !important;
    overflow: visible;
    max-width: 100%;
    border: 0 !important;
    width: 290px !important;
}
    .subscribe-form input[type="email"] {
flex: 1;
    border: none;
    padding: 20px !important;
    border-radius: 9999px;
    height: 100%;
    font-size: 16px;
    background: white;
    width: 290px !important;
}
    .subscribe-form button {
        width: 100%;
        height: 50px;
        border-radius: 9999px;
    }
}

  .subscribe-form {
        text-align: left;
        display: flex;
{% comment %} width: 509px; {% endcomment %}
height: 42px;
padding: 12px 0px 12px 16px;
{% comment %} justify-content: flex-end; {% endcomment %}
align-items: center;
flex-shrink: 0;
border-radius: 9999px;
background: #FFF;
}

  @media screen and (min-width: 769px) {
#shopify-section-{{ section.id }} .subscribe-form {
  text-align: left;
  display: flex;
  height: 42px;
  padding: 0; margin: 10px 0 0 0;
  align-items: center;
  flex-shrink: 0;
  border-radius: 9999px;
  background: #FFF;
  /* overflow: hidden; */
  max-width: 100%;
  border: 5px solid #fff;
      width: 450px;
}
#shopify-section-{{ section.id }} .subscribe-form input[type="email"] {
  flex: 1;
  border: none;
  padding: 0 20px;
  border-radius: 9999px 0 0 9999px;
  height: 100%;
  font-size: 16px;
}
#shopify-section-{{ section.id }} .subscribe-form button {
    height: 100%;
    width: auto;
    padding: 10px 24px;
    border-radius: 99999px;
    color: white;
    background: #20413B;
    font-size: 16px;
    border: none;
    cursor: pointer;
    margin: 3px;
}
}

  

  .subscribe-form input,  .subscribe-form textarea,  .subscribe-form select {
    border: 0 solid;
    border-color: var(--color-border);
    max-width: 100%;
    padding: 8px 10px;
    border-radius: var(--input-radius);
}

  .subscribe-form button {
    display: flex;
width: 124px;
padding: 10px 42px 9px 40px;
justify-content: center;
align-items: center;
border-radius: 9999px;
background: var(--Dark-Green, #20413B);
}

  .btn--sm { padding: 0.25rem 0.5rem; font-size: 0.75rem; }
  .btn--base { padding: 0.5rem 1rem; font-size: 1rem; }
  .btn--lg { padding: 0.75rem 1.5rem; font-size: 1.25rem; }

  .hover-zoom img:hover { transform: scale(1.05); transition: 0.3s ease; }
  .hover-grayscale img:hover { filter: grayscale(100%); transition: 0.3s ease; }
  .hover-fade img:hover { opacity: 0.7; transition: 0.3s ease; }



  #shopify-section-{{ section.id }}  .countdown {
    display: flex;
    gap: 10px;
    font-size: 18px;
  }

  #shopify-section-{{ section.id }}  .countdown span {
    background: #ffcc00;
    padding: 10px;
    border-radius: 5px;
    font-weight: bold;
  }

  #shopify-section-{{ section.id }}  .countdown__block {
    width: 100%;
    margin: 0;
    z-index: 3;
}

/* Countdown */

#shopify-section-{{ section.id }} .countdown-wrapper {
  position: relative;
}

#shopify-section-{{ section.id }} .countdown__background-image-wrapper {
  width: 100%;
  height: 100%;
  position: absolute;
}

#shopify-section-{{ section.id }} .countdown__background-image {
  position: absolute;
  width: 100%;
  height: 100%;
  object-fit: cover;
  top: 0;
  left: 0;
}

#shopify-section-{{ section.id }} .countdown__mobile-image-wrapper {
  width: 100%;
  height: 100%;
  position: absolute;
}

#shopify-section-{{ section.id }} .countdown__mobile-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

#shopify-section-{{ section.id }} .countdown-layout--banner .countdown__content {
    padding: 0;
  }

@media only screen and (min-width: 769px) {

#shopify-section-{{ section.id }} .countdown-layout--banner .countdown__content {
      display: flex;
      flex-wrap: nowrap;
      flex-direction: row;
      justify-content: space-around;
      gap: 1rem;
      padding: 0;
  }
    }

#shopify-section-{{ section.id }} .countdown-layout--banner.countdown-blocks--2.page-width .countdown__content {
      justify-content: space-around;
    }

#shopify-section-{{ section.id }} .countdown-layout--banner.countdown-blocks--2 .countdown__content {
      justify-content: center;
    }

@media only screen and (min-width: 769px) {

#shopify-section-{{ section.id }} .countdown-layout--banner .countdown__block {
      width: 33%;
  }
    }

#shopify-section-{{ section.id }} .countdown__content {
  width: 100%;
  height: auto;
  max-height: 650px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 0;
  text-align: center;
}

#shopify-section-{{ section.id }} page-width .countdown__content {
    position: relative;
  }

@media only screen and (min-width: 769px) {

#shopify-section-{{ section.id }} .countdown-layout--hero .countdown__content {
      height: 100vh;
  }
    }

.countdown__block {
  width: 100%;
  margin: 0;
  z-index: 3;
}

#shopify-section-{{ section.id }} .countdown__block--content {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}

#shopify-section-{{ section.id }} .countdown__block--content .countdown__block--button {
    width: 100%;
    margin: 0; /* Nested button will get spacing from text above it */
  }

@media only screen and (min-width: 769px) {

#shopify-section-{{ section.id }} .countdown-blocks--2.countdown-layout--banner .countdown__block--timer, #shopify-section-{{ section.id }} .countdown-blocks--2.countdown-layout--banner .countdown__block--content {
      width: 50%;
  }
    }

@media only screen and (min-width: 769px) {

#shopify-section-{{ section.id }} .countdown-blocks--2.countdown-layout--banner .countdown__block--button.button-block-active {
      width: 50%;
  }
    }

#shopify-section-{{ section.id }} .countdown__text-wrapper {
  display: flex;
  flex-direction: column;
  justify-content: center;
}

@media only screen and (min-width: 769px) {

#shopify-section-{{ section.id }} .countdown-layout--hero .countdown__text-wrapper {
      width: 50%;
  }
    }

#shopify-section-{{ section.id }} .countdown__text-wrapper--content-alignment-left {
  text-align: left;
}

#shopify-section-{{ section.id }} .countdown__text-wrapper--content-alignment-right {
  text-align: right;
}
 
#shopify-section-{{ section.id }} .countdown__display {
  display: flex;
  justify-content: left !important;
}

#shopify-section-{{ section.id }} .countdown__display--loaded {
  opacity: 1;
  visibility: visible;
  transition: opacity ease-in 0.3s;
}

#shopify-section-{{ section.id }} .countdown__display--visible + .countdown__timer-message--visible {
  margin-top: 1.5rem;
}

#shopify-section-{{ section.id }} .countdown__display--hidden {
  visibility: hidden;
  opacity: 0;
  width: 0;
  height: 0;
  margin: 0;
  transition: opacity ease-out 3s;
}

#shopify-section-{{ section.id }} .countdown__display-block {
  display: flex;
  flex-wrap: wrap;
  flex-direction: column;
  align-content: center;
  border-right: 0px solid;
  padding: 0 1rem 0 0;
  background-color: transparent;
  {% comment %} padding: 0 1rem; {% endcomment %}
}

#shopify-section-{{ section.id }} .countdown__display-block .number {
    border-radius: 8px;
background: #F8BB00;
display: flex;
padding: 13px 12px;
justify-content: center;
align-items: center;
color: #fff;
    font-size: 32px;
    }

#shopify-section-{{ section.id }} .countdown__display-block span {
color: #fff;
    font-size: 14px;
    }

{% comment %} .countdown__display-block:after {
    content: ':'
} {% endcomment %}

#shopify-section-{{ section.id }} .countdown__display-block h2 {
    margin-bottom: 16px;
  }

@media only screen and (min-width: 769px) {

#shopify-section-{{ section.id }} .countdown__display-block h2 {
      margin-bottom: 4px;
  }
    }

#shopify-section-{{ section.id }} .countdown__display-block span {
    font-size: 0.6rem;
    letter-spacing: 1.7px;
  }

@media only screen and (min-width: 769px) {

#shopify-section-{{ section.id }} .countdown__display-block span {
      font-size: 0.75rem;
  }
    }

#shopify-section-{{ section.id }} .countdown__display-block:last-child {
    border-right: none;
  }

[dir='rtl'] #shopify-section-{{ section.id }} .countdown__display-block:last-child {
      border-right: 1px solid;
    }

[dir='rtl'] #shopify-section-{{ section.id }} .countdown__display-block:first-child {
      border-right: none;
    }



#shopify-section-{{ section.id }} .index-section:not(.index-section--sub-product):first-child {
padding: 10px 0;}

#shopify-section-{{ section.id }} .countdown__timer-message {
  opacity: 0;
  visibility: hidden;
  margin: 0;
  height: 0;
}

#shopify-section-{{ section.id }} .countdown__timer-message--visible {
  opacity: 1;
  visibility: visible;
  transition: opacity ease-in 1s;
  height: auto;
}

#shopify-section-{{ section.id }} .countdown__block--hidden {
  opacity: 0;
  visibility: hidden;
  margin: 0;
  transition: opacity ease-out 1s;
  width: 0 !important;
}

#shopify-section-{{ section.id }} .countdown__overlay::after {
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 2;
    background-color: var(--countdown-overlay-rgba);
  }

/* Expanse specific styles */

.countdown__image--blur-true img {
    filter: blur(4px);
    transform: scale(1.03);
  }

.countdown__image--blur-true .countdown__background-image-wrapper {
    overflow: hidden;
  }

.countdown__image--blur-true .countdown__mobile-image-wrapper {
    overflow: hidden;
  }

.countdown-wrapper.page-width .countdown__content,
  .countdown-wrapper.page-width .countdown__background-image-wrapper,
  .countdown-wrapper.page-width .countdown__background-image,
  .countdown-wrapper.page-width .countdown__mobile-image-wrapper,
  .countdown-wrapper.page-width .countdown__mobile-image,
  .countdown-wrapper.page-width .countdown__overlay::after {
    border-radius: var(--roundness);
  }

.countdown__block--content .countdown__block--button {
    margin-top: 0;
  }

  .index-section {
        margin: 0;
    padding: 0;
}



/* ✅ UPDATE 2: Add responsive content width behavior */
@media (max-width: 768px) {
  #shopify-section-{{ section.id }} .section_content_width_standard {
    padding: 0 16px;
  }
  #shopify-section-{{ section.id }} .section_width_standard {
    padding: 0 16px;
  }
}

/* ✅ UPDATE 3: Mobile image support */
.countdown__background-image-wrapper {
  display: block;
}
.countdown__mobile-image-wrapper {
  display: none;
}
@media (max-width: 768px) {
  .countdown__background-image-wrapper {
    display: none !important;
  }
  .countdown__mobile-image-wrapper {
    display: block !important;
  }
  .countdown__mobile-image {
    object-fit: cover;
    width: 100%;
    height: auto;
    display: block;
  }
}

  .prime-day-banner {
  position: relative;
  overflow: hidden; /* Already included in your media query, but good to have globally */
  background-image: url('{{ section.settings.background_image | img_url: 'master' }}');
}

@media (max-width: 768px) {
  .prime-day-banner {
    background-image: url('{{ section.settings.mobile_image | img_url: 'master' }}');
    overflow: hidden;
  }
}

@media (max-width: 768px) {
  .mobile-align-flex-start {
    justify-content: flex-start !important;
  }
  .mobile-align-center {
    justify-content: center !important;
  }
  .mobile-align-flex-end {
    justify-content: flex-end !important;
  }
}
@media (max-width: 768px) {
  #shopify-section-{{ section.id }} {
    height: {{ section.settings.mobile_section_height }}px !important;
  }
}
@media (max-width: 768px) {
  #shopify-section-{{ section.id }} > div {
    padding-top: {{ section.settings.mobile_padding_top }}px !important;
    padding-bottom: {{ section.settings.mobile_padding_bottom }}px !important;
  }
}
{% comment %} TODO {% endcomment %}
.text-block{
  margin-left:15% !important;
}
@media (max-width: 768px) {
  .text-block{
    margin-left:0 !important;
  }
}


</style>

<div
  class="section_width_{{ section.settings.section_width }} prime-day-banner section-content {{ section.settings.custom_class }}
  mobile-align-{{ section.settings.mobile_vertical_alignment }}
  {% if section.settings.hide_desktop %}hide-desktop{% endif %}
  {% if section.settings.hide_tablet %}hide-tablet{% endif %}
  {% if section.settings.hide_mobile %}hide-mobile{% endif %}"
  id="{{ section.settings.custom_id }}"
style="
  background-color: {{ section.settings.background_color }};
  background-size: cover;
  background-position: center;
  height: {{ section.settings.section_height }}px;
  padding: {{ section.settings.padding_top }}px {{ section.settings.padding_right }}px {{ section.settings.padding_bottom }}px {{ section.settings.padding_left }}px;
  display: flex;
  flex-direction: column;
  justify-content: {{ section.settings.vertical_alignment }};
"
>
  {% if section.settings.custom_content_width_enabled %}
    <div style="max-width: {{ section.settings.custom_content_width }}%; margin: 0 auto; text-align: {{ section.settings.text_alignment }};">
  {% else %}
    <div class="section_content_width_{{ section.settings.section_content_width }} text-block" style="text-align: {{ section.settings.text_alignment }};">
  {% endif %}

    {% for block in section.blocks %}
      {% case block.type %}
        {% when 'heading' %}
          <{{ block.settings.heading_tag }}
            style="
              color: {{ block.settings.color }};
              font-weight: {{ block.settings.font_weight }};
              font-style: {% if block.settings.italic %}italic{% else %}normal{% endif %};
              text-align: {{ block.settings.alignment }};
              {% comment %} TODO {% endcomment %}
              text-shadow: -1px -1px 1px #fff,1px 1px 1px #297F67;
            "
            {{ block.shopify_attributes }}>
            {{ block.settings.text }}
          </{{ block.settings.heading_tag }}>

        {% when 'richtext' %}
          <div
            style="color: {{ block.settings.color }}; text-align: {{ block.settings.alignment }};"
            {{ block.shopify_attributes }}>
            {{ block.settings.content }}
          </div>

        {% when 'image' %}
          {% if block.settings.image != blank %}
            <div
              class="image-block hover-{{ block.settings.hover_effect }}"
              style="text-align: center;"
              {{ block.shopify_attributes }}>
              <img
                src="{{ block.settings.image | image_url }}"
                alt="{{ block.settings.image.alt | escape }}"
                loading="{% if block.settings.lazy_load %}lazy{% else %}eager{% endif %}"
                style="
                  width: {{ block.settings.image_width }}%;
                  aspect-ratio: {% case block.settings.image_ratio %}
                    {% when 'square' %} 1 / 1
                    {% when 'landscape' %} 16 / 9
                    {% when 'portrait' %} 3 / 4
                  {% endcase %};
                ">
              {% if block.settings.overlay_color != blank %}
                <div style="
                  background-color: {{ block.settings.overlay_color }};
                  opacity: {{ block.settings.overlay_opacity }};
                  position: absolute;
                  top: 0; left: 0; right: 0; bottom: 0;
                "></div>
              {% endif %}
            </div>
          {% endif %}

        {% when 'button' %}
          <div style="text-align: {{ block.settings.alignment }};">
            <a
              href="{{ block.settings.url }}"
              class="btn btn--{{ block.settings.size }}"
              style="
                color: {{ block.settings.text_color }};
                background-color: {{ block.settings.background }};
                {% if block.settings.style == 'outline' %}
                  border: 2px solid {{ block.settings.outline_color }};
                  background-color: transparent;
                {% endif %}
              "
              {{ block.shopify_attributes }}>
              {% if block.settings.icon_position == 'left' and block.settings.icon != blank %}
                <span>{{ block.settings.icon }}</span>
              {% endif %}
              {{ block.settings.text }}
              {% if block.settings.icon_position == 'right' and block.settings.icon != blank %}
                <span>{{ block.settings.icon }}</span>
              {% endif %}
            </a>
          </div>

          {% when 'subscribe_form' %}

            <style>
  #form-message {
    display: none;
    padding: 12px 16px;
    border-radius: 4px;
    margin-bottom: 12px;
    max-width: 400px;
    background: #fff;
    border: 1px solid #ddd;
    font-size: 14px;
  }
  #form-message.error {
    color: #b00020;
    border-color: #b00020;
    background: #fff;
  }
  #form-message.success {
    color: #0f5132;
    border-color: #198754;
    background: #fff;
  }
  .modal {
    position: fixed;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    background: white;
    padding: 20px;
    border: 1px solid #ccc;
    width: 80%;
    max-height: 80%;
    overflow: auto;
    z-index: 10000;
    color: black;
  }
  .modal button.modal-close {
    position: sticky;
    top: 0;
    float: right;
    background: #eee;
    border: none;
    padding: 8px 12px;
    cursor: pointer;
    color: #DB4B97;
  }
</style>

<div id="form-message" style="margin-bottom:10px;"></div>


<div id="tc-modal" style="display:none; position:fixed; top:50%; left:50%; transform:translate(-50%, -50%);
 background:white; padding:20px; border:1px solid #ccc; z-index:9999;">
  <p>
    You must agree to the 
    <a href="#" id="tos-link" style="text-decoration:underline; color:#DB4B97;">Terms of Service</a> 
and 
<a href="#" id="privacy-link" style="text-decoration:underline; color:#DB4B97;">Privacy Policy</a>

    to subscribe.
  </p>
  <button id="accept-tc">Accept</button>
</div>


<div id="tos-modal" class="modal">
  <button id="close-tos"  class="modal-close">Close</button>
  <div id="tos-content">
    <p>Loading...</p>
  </div>
</div>


<div id="privacy-modal" class="modal">
  <button id="close-privacy" class="modal-close">Close</button>
  <div id="privacy-content">
    <p>Loading...</p>
  </div>
</div>


<form id="subscribe-form" class="subscribe-form">
  <input id="email-input" type="email" name="contact[email]" placeholder="Enter your email" required>
  <button type="button" id="subscribe-btn">Subscribe</button>
</form>

        {% assign terms_url = pages[section.settings.terms_page].url %}
{% assign privacy_url = pages[section.settings.privacy_page].url %}


<script>
  // Elements
  const subscribeBtn = document.getElementById('subscribe-btn');
  const emailInput = document.getElementById('email-input');
  const formMessage = document.getElementById('form-message');
  const tcModal = document.getElementById('tc-modal');
  const acceptTc = document.getElementById('accept-tc');
  const subscribeForm = document.getElementById('subscribe-form');

  const tosLink = document.getElementById('tos-link');
  const privacyLink = document.getElementById('privacy-link');
  const tosModal = document.getElementById('tos-modal');
  const privacyModal = document.getElementById('privacy-modal');
  const tosContent = document.getElementById('tos-content');
  const privacyContent = document.getElementById('privacy-content');
  const closeTos = document.getElementById('close-tos');
  const closePrivacy = document.getElementById('close-privacy');

  // ✅ URLs resolved by Liquid
  const termsURL = '{{ terms_url }}';
  const privacyURL = '{{ privacy_url }}';

  // Click subscribe
  subscribeBtn.addEventListener('click', function() {
    const email = emailInput.value.trim();
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

    // Reset message
    formMessage.className = '';
    formMessage.style.display = 'block';

    if (!emailRegex.test(email)) {
      formMessage.classList.add('error');
      formMessage.textContent = "Please submit a valid email address.";
      return;
    }

    // Valid email → hide any message → show T&C modal
    formMessage.style.display = 'none';
    formMessage.textContent = '';
    tcModal.style.display = 'block';
  });

  // Accept T&C → submit
  acceptTc.addEventListener('click', function() {
    tcModal.style.display = 'none';
    formMessage.className = '';
    formMessage.classList.add('success');
    formMessage.textContent = "Thank you! Your email has been submitted.";
    formMessage.style.display = 'block';
    subscribeForm.submit();
  });

  // Open Terms modal
  tosLink.addEventListener('click', function(e) {
    e.preventDefault();
    tcModal.style.display = 'none';
    tosContent.innerHTML = '<p>Loading Terms of Service...</p>';
    tosModal.style.display = 'block';

    fetch(termsURL)
      .then(response => response.text())
      .then(html => {
        const parser = new DOMParser();
        const doc = parser.parseFromString(html, 'text/html');
        const mainContent = doc.querySelector('.legal-content') || doc.querySelector('main') || doc.body;
        if (mainContent) {
          tosContent.innerHTML = mainContent.innerHTML;
        } else {
          tosContent.innerHTML = '<p>Could not load Terms content.</p>';
        }
      })
      .catch(err => {
        tosContent.innerHTML = '<p>Failed to load Terms of Service.</p>';
      });
  });

  // Open Privacy modal
  privacyLink.addEventListener('click', function(e) {
    e.preventDefault();
    tcModal.style.display = 'none';
    privacyContent.innerHTML = '<p>Loading Privacy Policy...</p>';
    privacyModal.style.display = 'block';

    fetch(privacyURL)
      .then(response => response.text())
      .then(html => {
        const parser = new DOMParser();
        const doc = parser.parseFromString(html, 'text/html');
        const mainContent = doc.querySelector('.legal-content') || doc.querySelector('main') || doc.body;
        if (mainContent) {
          privacyContent.innerHTML = mainContent.innerHTML;
        } else {
          privacyContent.innerHTML = '<p>Could not load Privacy content.</p>';
        }
      })
      .catch(err => {
        privacyContent.innerHTML = '<p>Failed to load Privacy Policy.</p>';
      });
  });

  // Close modals → return to parent T&C modal
  closeTos.addEventListener('click', function() {
    tosModal.style.display = 'none';
    tcModal.style.display = 'block';
  });

  closePrivacy.addEventListener('click', function() {
    privacyModal.style.display = 'none';
    tcModal.style.display = 'block';
  });
</script>



            

          {% when 'timer' %}
          
{%- liquid
  assign full_width = full_width | default: section.settings.full_width, allow_false: true | default: false, allow_false: true
  assign layout = layout | default: section.settings.layout | default: 'banner'
  assign blur_image = blur_image | default: section.settings.blur_image, allow_false: true | default: false, allow_false: true
  assign background_image = background_image | default: section.settings.background_image
  assign mobile_image = mobile_image | default: section.settings.mobile_image
  assign overlay_opacity = overlay_opacity | default: section.settings.overlay_opacity | default: 0
  assign overlay_color = overlay_color | default: section.settings.overlay_color | default: '#000'
  assign color_scheme = color_scheme | default: section.settings.color_scheme
  assign hydration = hydration | default: 'on:visible'

  assign lazyload_images = true
  if section.index == 1
    assign lazyload_images = false
  endif

  unless color_scheme
    assign class_name = 'countdown-' | append: section.id
    render 'color-scheme-override', class_name: class_name
  endunless
-%}

<is-land {{ hydration }}>
  <div
    {% unless full_width %}
      class="index-section"
    {% endunless %}
  >
    <div >
      <div
        class="countdown__content color-scheme-{{ color_scheme }}"
      >
        {% if background_image != blank %}
          <div
            class="countdown__background-image-wrapper {% if mobile_image != blank %}small--hide{% endif %}"
          >
            {% comment %} Full width image so don't need to adjust sizes attribute, fallback is 100vw {% endcomment %}
         
            {% style %}
              #shopify-section-{{ section.id }} .countdown__background-image {
                {% if blur_image %}
                  filter: blur(4px);
                  {% if layout == 'banner' %}
                    transform: scale(1.1);
                  {% else %}
                    transform: scale(1.03);
                  {% endif %}
                {% endif %}
              }
            {% endstyle %}
            {% if overlay_opacity > 0 %}
              {% assign overlay_alpha = overlay_opacity | divided_by: 100.0 %}
              <div
                class="
                  countdown__overlay
                  {% if mobile_image != blank %}small--hide{% endif %}
                "
                style="
                                                        --countdown-overlay-rgba: {{ overlay_color | color_modify: 'alpha', overlay_alpha }}
                "
              ></div>
            {% endif %}
          </div>
        {% endif %}
        {% for block in section.blocks %}
          {% if block.type == '@app' %}
            <div class="countdown__block countdown__block--{{ block.type }}" {{ block.shopify_attributes }}>
              {%- render block -%}
            </div>
          {% endif %}
          {% if block.type == 'timer' %}
            <div class="countdown__block countdown__block--{{ block.type }}" {{ block.shopify_attributes }}>
              <div>
                <div class="countdown__display countdown__display--visible" data-time-display>
                  <div class="countdown__display-block">
                    <h2
                      class="number {% if section.blocks.size == 1 %}h1{% elsif section.blocks.size == 3 and button_block_hidden == false %}h3{% endif %}"
                      date-days-placeholder
                      {% comment %} TODO {% endcomment %}
                      id="banner_days"
                    >
                      00
                    </h2>
                    <span>Days</span>
                  </div>
                  <div class="countdown__display-block">
                    <h2
                      class="number {% if section.blocks.size == 1 %}h1{% elsif section.blocks.size == 3 and button_block_hidden == false %}h3{% endif %}"
                      date-hours-placeholder
                      {% comment %} TODO {% endcomment %}
                      id="banner_hours"
                    >
                      00
                    </h2>
                    <span>Hrs</span>
                  </div>
                  <div class="countdown__display-block">
                    <h2
                      class="number {% if section.blocks.size == 1 %}h1{% elsif section.blocks.size == 3 and button_block_hidden == false %}h3{% endif %}"
                      date-minutes-placeholder
                      {% comment %} TODO {% endcomment %}
                       id="banner_minutes"
                    >
                      00
                    </h2>
                    <span>Mins</span>
                  </div>
                  <div class="countdown__display-block">
                    <h2
                      class="number {% if section.blocks.size == 1 %}h1{% elsif section.blocks.size == 3 and button_block_hidden == false %}h3{% endif %}"
                      date-seconds-placeholder
                      {% comment %} TODO {% endcomment %}
                       id="banner_seconds"
                    >
                      00
                    </h2>
                    <span>Secs</span>
                  </div>
                </div>
                {% if block.settings.text != blank %}
                  <div class="countdown__timer-message" data-message-placeholder>{{ block.settings.text }}</div>
                {% endif %}
              </div>
            </div>
            <!-- TODO -->
            <script>
              document.addEventListener("DOMContentLoaded", function () {
                const countdownBanner = () => {
                  const bannerEndDate = new Date("{{ block.settings.banner_year }}-{{ block.settings.banner_month }}-{{ block.settings.banner_day }}T{{ block.settings.banner_hour }}:{{ block.settings.banner_minute }}:00");
                  const bannerNow = new Date();
                  const bannerTimeLeft = bannerEndDate - bannerNow;
                  if (bannerTimeLeft < 0) return;
                  const banner_days = Math.floor(bannerTimeLeft / (1000 * 60 * 60 * 24));
                  const banner_hours = Math.floor((bannerTimeLeft / (1000 * 60 * 60)) % 24);
                  const banner_minutes = Math.floor((bannerTimeLeft / 1000 / 60) % 60);
                  const banner_seconds = Math.floor((bannerTimeLeft / 1000) % 60);
                  document.getElementById("banner_days").innerText = String(banner_days).padStart(2, "0");
                  document.getElementById("banner_hours").innerText = String(banner_hours).padStart(2, "0");
                  document.getElementById("banner_minutes").innerText = String(banner_minutes).padStart(2, "0");
                  document.getElementById("banner_seconds").innerText = String(banner_seconds).padStart(2, "0");
                };
                setInterval(countdownBanner, 1000);
                countdownBanner();
              });
            </script>
          {% endif %}
          {% if block.type == 'content' %}
            <div class="countdown__block countdown__block--{{ block.type }}" {{ block.shopify_attributes }}>
              <div class="countdown__text-wrapper countdown__text-wrapper--content-alignment-{{ block.settings.content_alignment }}">
                <div class="countdown__heading">
                  <h2 class="{{ block.settings.heading_size }}">{{ block.settings.heading }}</h2>
                </div>
                <div class="countdown__richtext">
                  {{ block.settings.text }}
                </div>
                {% if section.blocks.size > 2
                  and section.blocks[0].type == 'content'
                  and section.blocks[1].type == 'button'
                %}
                  <div class="countdown__block countdown__block--button">
                    <a
                      class="countdown__button btn btn--{{ section.blocks[1].settings.button_style }}"
                      href="{{ section.blocks[1].settings.button_link }}"
                    >
                      {{ section.blocks[1].settings.button }}
                    </a>
                  </div>
                {% endif %}
              </div>
            </div>
          {% endif %}
          {% if block.type == 'button' and button_block_hidden == blank %}
            <div
              class="countdown__block countdown__block--{{ block.type }} button-block-active"
              {{ block.shopify_attributes }}
            >
              <a
                class="countdown__button btn btn--{{ block.settings.button_style }}"
                href="{{ block.settings.button_link }}"
              >
                {{ block.settings.button }}
              </a>
            </div>
          {% endif %}
        {% endfor %}
      </div>
    </div>
  </div>

  <template data-island>
    <script type="module">
      import 'components/section-countdown'
    </script>
  </template>
</is-land>


        {% when 'video' %}
          <div style="position: relative; text-align: center;" {{ block.shopify_attributes }}>
            {% if block.settings.video_url != blank %}
              <iframe
                src="{{ block.settings.video_url }}{% if block.settings.autoplay %}?autoplay=1{% endif %}"
                allow="autoplay; encrypted-media"
                allowfullscreen
                style="width: 100%; height: 400px;">
              </iframe>
            {% else %}
              <video
                {% if block.settings.autoplay %}autoplay{% endif %}
                {% if block.settings.loop %}loop{% endif %}
                {% if block.settings.muted %}muted{% endif %}
                controls
                poster="{{ block.settings.thumbnail | image_url }}"
                style="width: 100%; max-height: 500px;">
                <source src="{{ block.settings.uploaded_video | video_url }}" type="video/mp4">
              </video>
            {% endif %}
          </div>
      {% endcase %}
    {% endfor %}
  </div>
</div>

{% schema %}
{
  "name": "Prime Day Banner",
  "settings": [
    {
      "type": "select",
      "id": "section_width",
      "label": "Section Width",
      "default": "standard",
      "options": [
        { "value": "standard", "label": "90% Width" },
        { "value": "full", "label": "Full Width" }
      ]
    },
    {
      "type": "select",
      "id": "section_content_width",
      "label": "Content Width Preset",
      "default": "standard",
      "options": [
        { "value": "standard", "label": "90% Width" },
        { "value": "full", "label": "Full Width" }
      ]
    },
    {
      "type": "range",
      "id": "section_height",
      "label": "Section Height",
      "min": 200,
      "max": 1200,
      "step": 10,
      "default": 500,
      "unit": "px"
    },
    {
  "type": "select",
  "id": "mobile_vertical_alignment",
  "label": "Mobile Vertical Alignment",
  "default": "center",
  "options": [
    { "value": "flex-start", "label": "Top" },
    { "value": "center", "label": "Middle" },
    { "value": "flex-end", "label": "Bottom" }
  ]
},
{
  "type": "range",
  "id": "mobile_padding_top",
  "label": "Mobile Padding Top",
  "min": 0,
  "max": 100,
  "step": 1,
  "default": 0,
  "unit": "px"
},
{
  "type": "range",
  "id": "mobile_padding_bottom",
  "label": "Mobile Padding Bottom",
  "min": 0,
  "max": 100,
  "step": 1,
  "default": 0,
  "unit": "px"
},
{
"type": "range",
  "id": "mobile_section_height",
  "label": "Mobile Section Height",
  "min": 100,
  "max": 1100,
  "step": 10,
  "default": 400,
  "unit": "px"
},
    { "type": "color", "id": "background_color", "label": "Background Color", "default": "#ffffff" },
    { "type": "image_picker", "id": "background_image", "label": "Background Image" },
    { "type": "image_picker", "id": "mobile_image", "label": "Mobile Background Image" },
    { "type": "range", "id": "padding_top", "label": "Padding Top", "min": 0, "max": 100, "default": 0, "unit": "px" },
    { "type": "range", "id": "padding_bottom", "label": "Padding Bottom", "min": 0, "max": 100, "default": 0, "unit": "px" },
    { "type": "range", "id": "padding_left", "label": "Padding Left", "min": 0, "max": 100, "default": 0, "unit": "px" },
    { "type": "range", "id": "padding_right", "label": "Padding Right", "min": 0, "max": 100, "default": 0, "unit": "px" },
    { "type": "checkbox", "id": "hide_desktop", "label": "Hide on Desktop", "default": false },
    { "type": "checkbox", "id": "hide_tablet", "label": "Hide on Tablet", "default": false },
    { "type": "checkbox", "id": "hide_mobile", "label": "Hide on Mobile", "default": false },
{
      "type": "page",
      "id": "terms_page",
      "label": "Terms of Service Page"
    },
    {
      "type": "page",
      "id": "privacy_page",
      "label": "Privacy Policy Page"
    },
    { "type": "text", "id": "custom_class", "label": "Custom CSS Class" },
    { "type": "text", "id": "custom_id", "label": "Unique ID" },
    {
      "type": "select",
      "id": "text_alignment",
      "label": "Text Alignment",
      "default": "center",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ]
    },
    {
      "type": "select",
      "id": "vertical_alignment",
      "label": "Vertical Alignment",
      "default": "center",
      "options": [
        { "value": "flex-start", "label": "Top" },
        { "value": "center", "label": "Center" },
        { "value": "flex-end", "label": "Bottom" }
      ]
    }
  ],
  "blocks": [
    {
      "type": "heading",
      "name": "Heading",
      "settings": [
        { "type": "text", "id": "text", "label": "Text" },
        { "type": "select", "id": "heading_tag", "label": "Tag", "default": "h2", "options": [
          { "value": "h1", "label": "H1" }, { "value": "h2", "label": "H2" },
          { "value": "h3", "label": "H3" }, { "value": "h4", "label": "H4" }
        ] },
        { "type": "color", "id": "color", "label": "Color", "default": "#000000" },
        { "type": "checkbox", "id": "italic", "label": "Italic", "default": false },
        { "type": "select", "id": "font_weight", "label": "Font Weight", "default": "400", "options": [
          { "value": "300", "label": "Light" },
          { "value": "400", "label": "Normal" },
          { "value": "700", "label": "Bold" }
        ] },
        { "type": "select", "id": "alignment", "label": "Alignment", "default": "center", "options": [
          { "value": "left", "label": "Left" },
          { "value": "center", "label": "Center" },
          { "value": "right", "label": "Right" }
        ] }
      ]
    },
    {
      "type": "richtext",
      "name": "Rich Text",
      "settings": [
        { "type": "richtext", "id": "content", "label": "Content" },
        { "type": "color", "id": "color", "label": "Text Color", "default": "#000000" },
        { "type": "select", "id": "alignment", "label": "Text Alignment", "default": "center", "options": [
          { "value": "left", "label": "Left" },
          { "value": "center", "label": "Center" },
          { "value": "right", "label": "Right" }
        ] }
      ]
    },
    {
      "type": "subscribe_form",
      "name": "Subscribe Form",
      "settings": [
        { "type": "text", "id": "placeholder", "label": "Email Placeholder", "default": "Enter your email" },
        { "type": "text", "id": "button_label", "label": "Button Label", "default": "Subscribe" }
      ]
    },
    { "type": "timer", "name": "Countdown Timer", "settings": [ 
      { "type": "select", "id": "banner_year", "label": "Year", "default": "2025", "options": [ { "value": "2024", "label": "2024" }, { "value": "2025", "label": "2025" }, { "value": "2026", "label": "2026" } ] },
      { "type": "select", "id": "banner_month", "label": "Month", "default": "06", "options": [ { "value": "01", "label": "January" }, { "value": "02", "label": "February" }, { "value": "03", "label": "March" }, { "value": "04", "label": "April" }, { "value": "05", "label": "May" }, { "value": "06", "label": "June" }, { "value": "07", "label": "July" }, { "value": "08", "label": "August" }, { "value": "09", "label": "September" }, { "value": "10", "label": "October" }, { "value": "11", "label": "November" }, { "value": "12", "label": "December" } ] },
      { "type": "select", "id": "banner_day", "label": "Day", "default": "30", "options": [ { "value": "01", "label": "1" }, { "value": "02", "label": "2" }, { "value": "03", "label": "3" }, { "value": "04", "label": "4" }, { "value": "05", "label": "5" }, { "value": "06", "label": "6" }, { "value": "07", "label": "7" }, { "value": "08", "label": "8" }, { "value": "09", "label": "9" }, { "value": "10", "label": "10" }, { "value": "11", "label": "11" }, { "value": "12", "label": "12" }, { "value": "13", "label": "13" }, { "value": "14", "label": "14" }, { "value": "15", "label": "15" }, { "value": "16", "label": "16" }, { "value": "17", "label": "17" }, { "value": "18", "label": "18" }, { "value": "19", "label": "19" }, { "value": "20", "label": "20" }, { "value": "21", "label": "21" }, { "value": "22", "label": "22" }, { "value": "23", "label": "23" }, { "value": "24", "label": "24" }, { "value": "25", "label": "25" }, { "value": "26", "label": "26" }, { "value": "27", "label": "27" }, { "value": "28", "label": "28" }, { "value": "29", "label": "29" }, { "value": "30", "label": "30" }, { "value": "31", "label": "31" } ] },
      { "type": "select", "id": "banner_hour", "label": "Hour", "default": "23", "options": [ { "value": "00", "label": "00" }, { "value": "12", "label": "12" }, { "value": "23", "label": "23" } ] },
      { "type": "select", "id": "banner_minute", "label": "Minute", "default": "59", "options": [ { "value": "00", "label": "00" }, { "value": "15", "label": "15" }, { "value": "30", "label": "30" }, { "value": "45", "label": "45" }, { "value": "59", "label": "59" } ] },
      { "type": "text", "id": "description", "label": "Message Below Timer", "default": "Don't miss it, Up to $960 Off" } 
      ] 
    }
  ],
  "presets": [
    {
      "name": "Prime Day Banner",
      "category": "Custom"
    }
  ]
}
{% endschema %}
{% comment %} TODO:
 {
      "type": "timer",
      "name": "Countdown Timer",
      "settings": [
        { "type": "select", "id": "year", "label": "Year", "default": "2025", "options": [ { "value": "2024", "label": "2024" }, { "value": "2025", "label": "2025" } ] },
        { "type": "select", "id": "month", "label": "Month", "default": "01", "options": [ { "value": "01", "label": "January" }, { "value": "12", "label": "December" } ] },
        { "type": "select", "id": "day", "label": "Day", "default": "01", "options": [ { "value": "01", "label": "1" }, { "value": "31", "label": "31" } ] },
        { "type": "select", "id": "hour", "label": "Hour", "default": "00", "options": [ { "value": "00", "label": "00" }, { "value": "23", "label": "23" } ] },
        { "type": "select", "id": "minute", "label": "Minute", "default": "00", "options": [ { "value": "00", "label": "00" }, { "value": "59", "label": "59" } ] },
        { "type": "checkbox", "id": "hide_timer", "label": "Hide Timer After Completion", "default": false },
        { "type": "richtext", "id": "text", "label": "Completion Message" }
      ]
    }
{% endcomment %}
