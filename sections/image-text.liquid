{% schema %}
{
  "name": "Image/Text Flex Blocks",
  "settings": [
     {
  "type": "select",
  "id": "section_width",
  "label": "Section Width",
  "default": "standard",
  "options": [
    {
      "value": "standard",
      "label": "50% Width"
    },
    {
      "value": "full",
      "label": "Full Width"
    }
  ]
},
    {
      "type": "select",
      "id": "alignment",
      "label": "Content Alignment",
      "default": "center",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ]
    },
     {"type": "range", "id": "padding_top", "label": "Padding top", "min": 0, "max": 100, "step": 5, "default": 0, "unit": "px"},
    {"type": "range", "id": "padding_bottom", "label": "Padding bottom", "min": 0, "max": 100, "step": 5, "default": 0, "unit": "px"},
    {"type": "range", "id": "padding_left", "label": "Padding left", "min": 0, "max": 100, "step": 5, "default": 0, "unit": "px"},
    {"type": "range", "id": "padding_right", "label": "Padding right", "min": 0, "max": 100, "step": 5, "default": 0, "unit": "px"},
    {"type": "range", "id": "margin_top", "label": "Margin top", "min": 0, "max": 100, "step": 5, "default": 0, "unit": "px"},
    {"type": "range", "id": "margin_bottom", "label": "Margin bottom", "min": 0, "max": 100, "step": 5, "default": 0, "unit": "px"},
    {"type": "range", "id": "margin_left", "label": "Margin left", "min": 0, "max": 100, "step": 5, "default": 0, "unit": "px"},
    {"type": "range", "id": "margin_right", "label": "Margin right", "min": 0, "max": 100, "step": 5, "default": 0, "unit": "px"}
  ],
  "blocks": [
    {
      "type": "image",
      "name": "Image",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        }
      ]
    },
    {
      "type": "title",
      "name": "Title",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Title Text",
          "default": "Your Section Title"
        }
      ]
    },
    {
      "type": "text",
      "name": "Text",
      "settings": [
        {
          "type": "textarea",
          "id": "text",
          "label": "Paragraph Text",
          "default": "Some supporting content that explains your product or story."
        }
      ]
    },
    {
      "type": "button",
      "name": "Button",
      "settings": [
        {
          "type": "text",
          "id": "button_text",
          "label": "Button Text",
          "default": "Learn More"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Button Link"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Image/Text Flex Blocks",
      "category": "Custom",
      "blocks": [
        { "type": "image" },
        { "type": "title" },
        { "type": "text" },
        { "type": "button" }
      ]
    }
  ]
}
{% endschema %}

{% style %}
.section_width_standard,
.section_width_full {
transition: all 0.3s ease;
}
.section_width_full {
width: 100%;
}

.section_width_standard {
margin: 0 auto;
width: 90%;
}
{% endstyle %}

{% assign text_align = settings.alignment | default: 'center' %}

<div class="image-text-blocks-section px-4 md:px-8 py-6 section_width_{{ section.settings.section_width }} padding: {{ section.settings.padding_top }}px {{ section.settings.padding_right }}px {{ section.settings.padding_bottom }}px {{ section.settings.padding_left }}px; margin: {{ section.settings.margin_top }}px {{ section.settings.margin_right }}px {{ section.settings.margin_bottom }}px {{ section.settings.margin_left }}px" style="text-align: {{ text_align }};">
  {% for block in section.blocks %}
    {% case block.type %}
      {% when 'image' %}
        {% if block.settings.image %}
          <img
            src="{{ block.settings.image | image_url: width: 1200 }}"
            alt="Section image"
            class="w-full mb-4"
            loading="lazy"
          />
        {% endif %}

      {% when 'title' %}
        <h2 class="text-2xl md:text-4xl font-bold mb-2">{{ block.settings.title }}</h2>

      {% when 'text' %}
        <p class="mb-4">{{ block.settings.text }}</p>

      {% when 'button' %}
        {% if block.settings.button_text and block.settings.button_link %}
          <div>
            <a href="{{ block.settings.button_link }}"
               class="inline-block bg-black text-white py-2 px-4 rounded hover:bg-gray-800"
               style="
                 {% if text_align == 'center' %}
                   display: block; margin-left: auto; margin-right: auto;
                 {% elsif text_align == 'right' %}
                   display: block; margin-left: auto;
                 {% endif %}
               ">
              {{ block.settings.button_text }}
            </a>
          </div>
        {% endif %}
    {% endcase %}
  {% endfor %}
</div>
