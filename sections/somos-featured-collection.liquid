{% # components v3.0.1 | Copyright Â© 2024 Archetype Themes Limited Partnership  | "Shopify Theme Store (https://www.shopify.com/legal/terms#9-additional-services)" License  %}
{%- comment -%}
  Renders a section with a list of product blocks.
{%- endcomment -%}


<style>
#shopify-section-{{ section.id }} .product-card__title {
  font-size: 20px;
  margin: 0;
}
#shopify-section-{{ section.id }} .btn, #shopify-section-{{ section.id }} .rte .btn, #shopify-section-{{ section.id }} .shopify-payment-button .shopify-payment-button__button--unbranded
#shopify-section-{{ section.id }} .btn--secondary,
#shopify-section-{{ section.id }} .block-buy-buttons[data-show-dynamic-checkout] .btn,
#shopify-section-{{ section.id }} .rte .btn--secondary {
        font-size: 13px;
    line-height: normal;
    padding: 10px;

    display: inline-block;
    padding: 10px 20px;
    text-decoration: none;
}
#shopify-section-{{ section.id }} .product-card__price {
font-weight: 500;
    font-size: 20px;
}
</style>

{%- liquid
  assign title = title | default: section.settings.title
  assign heading_size = heading_size | default: section.settings.heading_size | default: 'h2'
  assign heading_position = heading_position | default: section.settings.heading_alignment | default: 'left'
  assign divider = divider | default: section.settings.divider, allow_false: true | default: false, allow_false: true
-%}

{%- if divider -%}<div class="section--divider">{%- endif -%}
<div class="page-width section_width_{{ section.settings.section_width }}" style="padding: {{ section.settings.padding_top }}px {{ section.settings.padding_right }}px {{ section.settings.padding_bottom }}px {{ section.settings.padding_left }}px; margin: {{ section.settings.margin_top }}px {{ section.settings.margin_right }}px {{ section.settings.margin_bottom }}px {{ section.settings.margin_left }}px">
  {%- if title != blank -%}
    <div class="section-header" style="text-align: {{ heading_position }};">
      <h2 class="section-header__title {{ heading_size }}" style="text-align: {{ heading_position }};">{{ title | escape }}</h2>
    </div>
  {%- endif -%}

  {%- if section.settings.intro_text != blank -%}
    <div class="rte" style="text-align: {{ heading_position }}; margin-bottom: 1rem;">
      {{ section.settings.intro_text }}
    </div>
  {%- endif -%}

  <div
    class="new-grid section_content_width_{{ section.settings.section_content_width }}"
    {% if section.blocks.size < 6 %}
      {%- render 'grid-view-type', products_per_row: section.blocks.size -%}
    {% else %}
      data-view="6-3"
    {% endif %}
  >
    {%- liquid
      assign is_empty = true
      if section.blocks.size > 0
        assign is_empty = false
      endif
    -%}

    {%- for block in section.blocks -%}
      {%- liquid
        assign product = block.settings.product
        assign image_to_show = block.settings.custom_image | default: product.featured_image
      -%}

      <div class="product-card" style="width: 25%; float: left; padding: 1rem; box-sizing: border-box;">
        {% if image_to_show %}
          <img
            src="{{ image_to_show | img_url: '800x' }}"
            alt="{{ product.title | escape }}"
            loading="{% if block.settings.lazyload %}lazy{% else %}eager{% endif %}"
            class="product-card__image hover-{{ block.settings.hover_effect }}"
            style="width: {{ block.settings.image_size }}%; aspect-ratio: 
              {% case block.settings.image_ratio %}
                {% when 'square' %}1 / 1
                {% when 'landscape' %}4 / 3
                {% when 'portrait' %}3 / 4
                {% else %}1 / 1
              {% endcase %};"
          >
        {% endif %}

        <div class="product-card__info">
          <h3 class="product-card__title" style="text-align: left;">{{ block.settings.custom_title | default: product.title }}</h3>
          <div class="product-card__meta">{{ product.vendor }}</div>

          <div class="product-card__pricing" style="display: flex; gap: 0.5rem; align-items: center;">
            <div class="product-card__before">
              <div style="font-size: 0.875rem; color: #666;">Before at</div>
              <span class="product-card__price--compare" style="text-decoration: line-through;">{{ product.compare_at_price | money }}</span>
            </div>
            <div class="product-card__now">
              <div style="font-size: 0.875rem; color: #666;">Now at</div>
              <span class="product-card__price" style="font-weight: bold;">{{ product.price | money }}</span>
            </div>
            {% if product.compare_at_price > product.price %}
              <span class="product-card__discount" style="background: #fdd835; color: #000; font-size: 0.75rem; padding: 0.25rem 0.5rem; border-radius: 0.25rem;">
                {{ 100 | minus: product.price | times: 100.0 | divided_by: product.compare_at_price | round }}% OFF
              </span>
            {% endif %}
          </div>

          <div class="product-card__buttons" style="margin-top: 1rem; display: flex; gap: 0.5rem;">
            <a href="{{ product.url }}" class="btn btn--secondary" style="flex: 1; text-align: center; color: {{ block.settings.secondary_button_text_color }}; background-color: {{ block.settings.secondary_button_background_color }}; border-color: {{ block.settings.secondary_button_border_color }};">Learn More</a>
            <form method="post" action="/cart/add" style="flex: 1;">
              <input type="hidden" name="id" value="{{ product.variants.first.id }}">
              <button type="submit" class="btn btn--primary" style="width: 100%; color: {{ block.settings.primary_button_text_color }}; background-color: {{ block.settings.primary_button_background_color }}; border-color: {{ block.settings.primary_button_border_color }};">Buy It Now</button>
            </form>
          </div>
        </div>
      </div>
    {%- endfor -%}

    {%- if is_empty -%}
      <div class="page-width">
        <div class="rte clearfix">
          {% render 't_with_fallback',
            key: 'info.section_no_content',
            fallback: "This section doesn't currently include any content. Add content to this section using the sidebar."
          %}
        </div>
      </div>
    {%- endif -%}
  </div>
</div>

{%- if divider -%}</div>{%- endif -%}




{% schema %}
{
  "name": "Somos Featured Coll",
  "class": "index-section",
  "max_blocks": 18,
  "settings": [
      {
      "type": "select",
      "id": "section_width",
      "label": "Section Width",
      "default": "standard",
      "options": [
        { "value": "standard", "label": "50% Width" },
        { "value": "full", "label": "Full Width" }
      ]
    },
    {
      "type": "select",
      "id": "section_content_width",
      "label": "Content Width",
      "default": "standard",
      "options": [
        { "value": "standard", "label": "50% Width" },
        { "value": "full", "label": "Full Width" }
      ]
    },
    { "type": "text", "id": "title", "label": "Section Title", "default": "Featured Products" },
    { "type": "select", "id": "heading_size", "label": "Heading Size", "default": "h2", "options": [
      { "value": "h1", "label": "H1" },
      { "value": "h2", "label": "H2" },
      { "value": "h3", "label": "H3" },
      { "value": "h4", "label": "H4" },
      { "value": "h5", "label": "H5" },
      { "value": "h6", "label": "H6" },
      { "value": "body", "label": "Body" },
      { "value": "italic", "label": "Italic" }
    ] },
    { "type": "select", "id": "heading_alignment", "label": "Heading Alignment", "default": "left", "options": [
      { "value": "left", "label": "Left" },
      { "value": "center", "label": "Center" },
      { "value": "right", "label": "Right" }
    ] },
    { "type": "richtext", "id": "intro_text", "label": "Intro Text" },
    { "type": "image_picker", "id": "background_image", "label": "Background Image" },
    { "type": "color", "id": "background_color", "label": "Background Color" },
    { "type": "checkbox", "id": "hide_on_desktop", "label": "Hide on Desktop" },
    { "type": "checkbox", "id": "hide_on_tablet", "label": "Hide on Tablet" },
    { "type": "checkbox", "id": "hide_on_mobile", "label": "Hide on Mobile" },
    { "type": "range", "id": "section_height_desktop", "label": "Section Height - Desktop (vh)", "min": 0, "max": 100, "default": 100, "step": 5 },
    { "type": "range", "id": "section_height_tablet", "label": "Section Height - Tablet (vh)", "min": 0, "max": 100, "default": 100, "step": 5 },
    { "type": "range", "id": "section_height_mobile", "label": "Section Height - Mobile (vh)", "min": 0, "max": 100, "default": 100, "step": 5 },
      {"type": "range", "id": "padding_top", "label": "Padding top", "min": 0, "max": 100, "step": 5, "default": 0, "unit": "px"},
    {"type": "range", "id": "padding_bottom", "label": "Padding bottom", "min": 0, "max": 100, "step": 5, "default": 0, "unit": "px"},
    {"type": "range", "id": "padding_left", "label": "Padding left", "min": 0, "max": 100, "step": 5, "default": 0, "unit": "px"},
    {"type": "range", "id": "padding_right", "label": "Padding right", "min": 0, "max": 100, "step": 5, "default": 0, "unit": "px"},
    {"type": "range", "id": "margin_top", "label": "Margin top", "min": 0, "max": 100, "step": 5, "default": 0, "unit": "px"},
    {"type": "range", "id": "margin_bottom", "label": "Margin bottom", "min": 0, "max": 100, "step": 5, "default": 0, "unit": "px"},
    {"type": "range", "id": "margin_left", "label": "Margin left", "min": 0, "max": 100, "step": 5, "default": 0, "unit": "px"},
    {"type": "range", "id": "margin_right", "label": "Margin right", "min": 0, "max": 100, "step": 5, "default": 0, "unit": "px"},
    { "type": "checkbox", "id": "use_slider", "label": "Display as Slider", "default": false },
    { "type": "checkbox", "id": "show_arrows", "label": "Show Slider Arrows", "default": true },
    { "type": "checkbox", "id": "show_dots", "label": "Show Slider Dots", "default": true },
    { "type": "text", "id": "custom_class", "label": "Custom CSS Class" },
    { "type": "text", "id": "custom_id", "label": "Unique Section ID" },
    { "type": "textarea", "id": "json_blocks", "label": "JSON Blocks (Advanced)", "info": "Define custom block content using JSON." }
  ],
  "blocks": [
    {
      "type": "product",
      "name": "Product Item",
      "settings": [
        { "type": "product", "id": "product", "label": "Select Product" },
        { "type": "text", "id": "custom_title", "label": "Override Title" },
        { "type": "url", "id": "learn_more_link", "label": "Learn More Link" },
        { "type": "image_picker", "id": "custom_image", "label": "Custom Image (overrides product image)" },
        { "type": "range", "id": "image_size", "label": "Image Size (%)", "min": 10, "max": 100, "step": 5, "default": 100 },
        { "type": "select", "id": "image_ratio", "label": "Image Ratio", "default": "landscape", "options": [
          { "value": "square", "label": "Square" },
          { "value": "landscape", "label": "Landscape" },
          { "value": "portrait", "label": "Portrait" }
        ] },
        { "type": "checkbox", "id": "lazyload", "label": "Enable Lazy Load", "default": true },
        { "type": "select", "id": "hover_effect", "label": "Hover Effect", "default": "zoom", "options": [
          { "value": "zoom", "label": "Zoom" },
          { "value": "fade", "label": "Fade" },
          { "value": "grayscale", "label": "Grayscale" },
          { "value": "none", "label": "None" }
        ] },
        { "type": "color", "id": "overlay_color", "label": "Overlay Color" },
        { "type": "range", "id": "overlay_opacity", "label": "Overlay Opacity (%)", "min": 0, "max": 100, "default": 50 },
        { "type": "url", "id": "button_link", "label": "Button Link" },
        { "type": "text", "id": "button_text", "label": "Button Text", "default": "Buy It Now" },
        { "type": "select", "id": "button_style", "label": "Button Style", "default": "primary", "options": [
          { "value": "primary", "label": "Primary" },
          { "value": "secondary", "label": "Secondary" }
        ] },
        { "type": "select", "id": "button_icon_position", "label": "Button Icon Position", "default": "right", "options": [
          { "value": "left", "label": "Left of Text" },
          { "value": "right", "label": "Right of Text" },
          { "value": "none", "label": "No Icon" }
        ] }
      ]
    }
  ],
  "presets": [
    {
      "name": "Somos Featured Coll",
      "category": "Custom",
      "blocks": [
        { "type": "product" },
        { "type": "product" },
        { "type": "product" },
        { "type": "product" }
      ]
    }
  ],
  "disabled_on": {
    "groups": ["footer", "header", "custom.popups"]
  }
}
{% endschema %}
