{{ 'accounts.css' | asset_url | stylesheet_tag }}

<div class="account-wrapper section_content_width_{{ section.settings.section_content_width }}">
  <aside class="account-sidebar">
    {% render 'account-sidebar' %}
  </aside>

  <main class="account-content section_width_{{ section.settings.section_width }}">

    <div class="account-addresses">
  <h2 class="account-addresses__title">Address</h2>

  <button class="add-address-button" onclick="Shopify.CustomerAddress.toggleNewForm();">
    + Add a new address
  </button>

<div id="AddAddress" style="display:none;">
  {% form 'customer_address', customer.new_address %}
    {% render 'address-form', form: form, address: customer.new_address %}
  {% endform %}
</div>


  <div class="address-grid">
    {% for address in customer.addresses %}
      <div class="address-card">
        <div class="address-card__top">
          <div>
            <strong>Address Name</strong><br>
            {{ address.address1 }}<br>
            {{ address.city }}, {{ address.province_code }} {{ address.zip }}<br>
            {{ address.country }}
          </div>
          <div class="address-card__phone">
            {{ address.phone }}
          </div>
        </div>

        {% if address == customer.default_address %}
          <div class="address-card__default">Default Shipping Address</div>
        {% endif %}

        <div class="address-card__actions">
          <a href="#" onclick="Shopify.CustomerAddress.toggleEditForm({{ address.id }}); return false;">Edit</a>
        </div>

        <div id="EditAddress_{{ address.id }}" style="display:none;">
  {% form 'customer_address', address %}
    {% render 'address-form', form: form, address: address %}
  {% endform %}
</div>

      </div>
    {% endfor %}
  </div>
</div>


{% comment %} <img src="https://cdn.shopify.com/s/files/1/0584/6256/8509/files/Sylvox-Website-_-Figma-08-08-2025_02_50_PM_2.png?v=1754661119" alt="Your Image"> {% endcomment %}

  </main>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    Shopify.CustomerAddress = {
      toggleNewForm: function () {
        const form = document.getElementById('AddAddress');
        if (form) form.style.display = form.style.display === 'none' ? 'block' : 'none';
      },
      toggleEditForm: function (id) {
        const form = document.getElementById('EditAddress_' + id);
        if (form) form.style.display = form.style.display === 'none' ? 'block' : 'none';
      }
    };
  });
</script>


{% schema %}
{
  "name": "Account Address",
  "settings": [
      {
      "type": "select",
      "id": "section_width",
      "label": "Section Width",
      "default": "standard",
      "options": [
        { "value": "standard", "label": "50% Width" },
        { "value": "full", "label": "Full Width" }
      ]
    },
    {
      "type": "select",
      "id": "section_content_width",
      "label": "Content Width",
      "default": "standard",
      "options": [
        { "value": "standard", "label": "50% Width" },
        { "value": "full", "label": "Full Width" }
      ]
    }
  ]
}
{% endschema %}
